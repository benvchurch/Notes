\documentclass[12pt]{article}
\usepackage{import}
\import{./}{Includes}


\begin{document}

\section{Feb 11}

\subsection{Line Bundles}

There exists a map,
\[ \Gamma(X, \L^{\otimes a}) \otimes \Gamma(X, \L^{\otimes b}) \to \Gamma(X, \L^{\otimes ab}) \]
since we have an isomorphism $\L^{\otimes a} \otimes \L^{\otimes b} = \L^{\otimes ab}$. Furthermore, since $\L$ is rank $1$ this map is commutative since $s \times s' = s' \otimes s$ since they only differ by a section of $\struct{X}$. This alows us to define the following graded ring structure. 

\begin{definition}
Let $\L$ be an invertable $\struct{X}$-module, $\F$ any $\struct{X}$-module and $s \in \L(X)$ a global section. Then we define the following graded ring.
\[ \Gamma_*(X, \L) = \bigoplus_{n \ge 0} \Gamma(X, \L^{\otimes n}) \]
and then the following module,
\[ \Gamma_*(X, \L, \F) = \bigoplus_{n \ge 0} \Gamma(X, \F \otimes_{\struct{X}} \L^{\otimes n}) \]
which is a graded $\Gamma_*(X, \L)$-module. Furthermore, there is a map,
\[ \Gamma_*(X, \L, \F)_{(s)} \to \F(X_s) = \Gamma(X_s, \F) \]
sending $\frac{t}{s^n} \mapsto t|_{X_s} \otimes (s |_{X_s})^{\otimes -n}$. 
\end{definition}

\begin{proposition}
Let $X$ be a quasi-compact, quasi-seperated scheme and $\F$ be quasi-coherent. Then the above map is an isomorphism. 
\end{proposition}

\begin{proof}
Tag OB5K. (Compare with that Hartshorne Excercise 2.16).
\end{proof}

\begin{example}
Let $A$ be a graded ring such that $A$ is generated by $A_1$ as a $A_0$-algebra (e.g. $A = k[X_0, \dots, X_n]$). Let $X = \Proj{A}$ and consider the graded module $M = A(n)$ which is the graded module $M_{k} = A_{k + n}$. Then we can construct the Serre twists,
\[ \struct{X}(n) = \wt{M} = \wt{A(n)} \]
which is an invertable $\struct{X}$-module. Furthermore,
\[ \struct{X}(n) \otimes_{\struct{X}} \struct{X}(m) = \struct{X}(n + m) \]
\end{example}

\begin{remark}
This will not be invertible and these maps will not be isomorphisms in general when $A$ does not satisfy the required conditions.
\end{remark}

\begin{proof}
We can decompose,
\[ X = \bigcup_{f \in A_1} D_{+}(f) = \bigcup_{f \in A_1}  \Spec{A_{(f)}} \]
via the given assumptions. We know that,
\[ \struct{X}(n) |_{D_+(f)} = \wt{A(n)} |_{D_+(f)} = \wt{A[f^{-1}]_{n}} \]
However it is clear that $A[f^{-1}]_{n} = A[f^{-1}]_{0} \cdot f^n$ so this sheaf is free of rank $1$. 
\end{proof}

\begin{remark}
For $n = 1$ any element $f \in A_1$ gives a global section $f \in \Gamma(X, \struct{X}(1))$ such that $D_{+}(f) = X_s$ and hence,
\[ \struct{X}|_{D_+(f)} \xrightarrow{\sim} \struct{X}(1)|_{X_s} \]\end{remark}

\begin{corollary}
In the setting above, further assume that $A$ is generated by finitely many $f \in A_1$ as an $A_0$-algebra. Then for any quasi-coherent $\struct{X}$-module $\F$ if we set,
\[ M = \Gamma_*(X, \struct{X}(1), \F) \]
as a graded $A$-module via the map,
\[ A \to \Gamma_*(X, \struct{X}(1)) = \bigoplus_{n \ge 0} \Gamma(X, \struct{X}(n)) \]
Then we get, $\F = \wt{M}$. 
\end{corollary}

\begin{proof}
Tag 
\end{proof}

\section{Feb. 13}


\begin{definition}
Let $X$ be a scheme and $\L$ an invertivle $\struct{X}$-module . We say $\L$ is \textit{ample} if $X$ is quasi-compact and $\forall x \in X : \exists n > 0 : s \in \Gamma(X, \L^{\otimes n})$ such that $X_{s}$ is affine and $x \in X_s$. 
\end{definition}

\begin{example}
Let $X = \Proj{A}$ where $A$ is generated by $A_1$ as a $A_0$-algebra and $A_1 = f_1 A_0 + \cdots + f_r A_0$. Then $\struct{X}(1)$ is invertible and $X$ is covered by $D_{+}(f_i)$ and is quasi-compact, and $D_+(f_i) = X_{s_i}$ where $s_i \in \Gamma(X, \struct{X}(1))$ is a section corresponding to $f_i$. 
\end{example}

\begin{proposition}
Let $X$ be quasi-compact and quasi-seperated for $\L \in \Pic{X}$ the following are equivalent,
\begin{enumerate}
\item $\L$ is ample
\item for all $\struct{X}$-modules $\F$ locally of finite type there exists $n > 0$ s.t. $\F \otimes_{\struct{X}} \L^{\otimes n}$ is generated by global sections.
\end{enumerate}
\end{proposition}

\begin{proof}
TAG 01Q3.
\end{proof}

\begin{lemma}
$\L$ is ample iff $\L^{\otimes n}$ is ample for any $n > 0$. 
\end{lemma}

\begin{lemma}
If $X$ is affine, and $\L$ is invertible, and $s \in \Gamma(X, \L)$ then $X_s$ is affine. 
\end{lemma}

\begin{definition}
A scheme is noetherian if it has a finite open cover by spectra of noetherian rings. 
\end{definition}

\begin{remark}
It is equivalent to require that $X$ is quasi-compact and $\struct{X}(U)$ is noetherian for each affine open.
\end{remark}

\begin{lemma}
A locally noetherian scheme is quasi-seperated.
\end{lemma}

\begin{proof}
If $U, V$ are affines then $U \cap V$ is quasi-compact since every subspace of a noetherian space is quasi-compact.
\end{proof}

\begin{definition}
Let $X$ be a neotherian scheme. An $\struct{X}$-module $\F$ is \textit{coherent} if it is quasi-coherent and locally of finite type. 
\end{definition}

\begin{remark}
It is equivalent to require that locally on affine opens $\F |_U = \wt{M}$ for a finitely-generated module $M$. 
\end{remark}

\begin{remark}
The inclusion functors,
\[ \Coh{\struct{X}} \subset \QCoh{\struct{X}} \subset \shMod{\struct{X}} \]
are exact and preserved under extensions i.e. given a short exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \F_1 \arrow[r] & \F_2 \arrow[r] & \F_3 \arrow[r] & 0
\end{tikzcd}
\end{center}
if $\F_1, \F_2$ are (quasi)-coherent  then $\F_2$ is also (quasi)-coherent. 
\end{remark}

\begin{lemma}
A scheme of finite type over a noetherian scheme is noetherian.
\end{lemma}

\begin{proof}
Since $f : X \to Y$ is finite type $f$ is quasi-compact but $Y$ is quasi-compact open so its preimage $X$ is also quasi-compact. Furthermore, for any affine opens $\Spec{A} = U \subset X$ and $\Spec{B} = V \subset Y$ such that $f(U) \subset V$ we get a ring map $B \to A$ of finite type so $B[x_1, \dots, x_n] \onto A$ and since $B$ is noetherian we see that $A$ is noetherian so $X$ is quasi-compact and covered by $\Spec{A}$ for noetherian rings $A$. 
\end{proof}

\begin{remark}
We want to prove the following theorem. Let $R$ be a noetherian ring, $X$ a projective (or proper) scheme over $R$ (then $X$ is noetherian), and $\F$ a coherent sheaf on $X$, then,
\[ H^i(X, \F) \]
is a finite $R$-module for any $i$ and $H^i(X, \F) = 0$ for $i > \dim{X}$. 
\end{remark}

\section{Feb 18}

\begin{definition}
An immersion $j : X \to Y$ is a morphism which may be factored as $X \to U \to Y$ where $X \to U$ is a closed immersion and $U \to Y$ is an open immersion.
\end{definition}

\begin{definition}
Let $R$ be a ring, and $X$ a scheme over $R$. We say $X$ is \textit{quasi-projective over $R$} iff there exists a quasi-compact immersion $j : X \to \P^n_R$ over $R$.
\end{definition}

\begin{rmk}
If $X$ is proper over $R$ (or just universally closed) then $j$ is automatically a closed immersion since $\P^n_R \to \Spec{R}$ is seperated and $X \to \Spec{R}$ is universally closed implies that $j : X \to \P^n_R$ is universally closed and in particular topologically closed and thus closed as an immersion. This gives the following lemma.
\end{rmk}

\begin{lemma}
$X$ is projective over $R$ iff $X$ is quasi-projective and proper over $R$.
\end{lemma}

\begin{theorem}
Let $R$ be a ring and $X$ a scheme over $R$. The TFAE,
\begin{enumerate}
\item $X$ is quasi-projective over $R$
\item $X$ is of finite type over $R$ and $X$ has an ample invertible module $\L$
\item there exists a quasi-compact open immersion $X \embed X'$ with $X'$ projective over $R$. 
\end{enumerate}
\end{theorem}

\begin{lemma}
Let $j : X \to Y$ be a quasi-compact immersion and $\L$ an ample line bundle on $Y$. Then $j^* \L$ is an ample line bundle on $Y$.
\end{lemma}

\begin{proof}
(DO THIS!!)
\end{proof}

\begin{lemma}
Let $j : X \to Y$ be a quasi-compact immersion and $X'$ is scheme-theoretic image. Then $j : X \to X'$ is an open immersion.
\end{lemma}

\begin{proof}
Since $j$ is qc and qs (immersions are seperated) then $j_* \struct{X}$ is quasi-coherent and thus $\I = \ker{(\struct{Y} \to \struct{X})}$ is quasi-coherent so we find $X' = V(\I)$
(FINSIH THIS)
\end{proof}

\begin{example}
$\Spec{k[[x]]} \to \Spec{k[x]}$ has scheme theoretic image $\Spec{k[x]}$ since its image contains the generic point. However, its set theoretic image is two points. 
\end{example}

\begin{proof}
of Theorem (2) $\implies$ (1). Choose $r \ge 0$ and $n \ge 1$ and $s_0, \dots, s_r \in \Gamma(X, \L^{\otimes n})$ s.t.
\[ X = \bigcup_{i = 0}^r X_{s_i} \]
and $X_{s_i}$ affine. Write $X_{s_i} = \Spec{A_i}$. Now $R$ is finite type over $R$ so $A_i$ is finite type over $R$ so we may take $a_{i1}, \dots, a_{i N_i} \in A_i$ which generate $A_i$ as an $R$-algebra. Choose $m \ge 1$ and $s_{ij} \in \Gamma(X, \L^{\otimes mn})$ such that $a_{ij} = s_{ij} \cdot s_i^{\otimes -m} |_{X_{s_i}}$. Therefore, $s_0^{\otimes m}, \dots, s_r^{\otimes m}, s_{ij} \in \Gamma(X, \L^{\otimes mn})$ generate $\L^{\otimes mn}$ and therefore define a morphism $\varphi : X \to \P_R^{r + \sum N_i}$. It suffices to check that $X_{s_i} \to D_{+}(T_i)$ are a closed immersion. This holds because it is given by the ring map,
\[ R[ \tfrac{T_0}{T_1}, \dots, \tfrac{T_r}{T_i}, \tfrac{T_{ij}}{T_i} ] \to A_i = \struct{X}(X_{s_i})  \]
given by $\frac{T_{ij}}{T_i} \to a_{ij}$ which is clearly surjective so $X_{s_i} \to D_+(T_i)$ is a closed immersion.
\end{proof}

\begin{rmk}
If we had checked that $X_{s_{ij}} \to D(T_{ij})$ we also a closed immersion with $X_{s_{ij}}$ affine then $\varphi : X \to \P^N_R$ would be a \textit{closed} immersion. We checked only that it is locally a closed immersion on $X$
\end{rmk}

\subsection{Functorial Characterization of $\P^n_R$}

\renewcommand{\Sch}{\mathfrak{Sch}}
\newcommand{\Set}{\mathfrak{Set}}

\newcommand{\rightarrowdbl}{\rightarrow\mathrel{\mkern-14mu}\rightarrow}

\newcommand{\xrightarrowdbl}[2][]{%
  \xrightarrow[#1]{#2}\mathrel{\mkern-14mu}\rightarrow
}

Consider the functor, $F : \Sch_R \to \Set$ via,
\[ T \mapsto \{ (\L, s_0, \dots, s_n) \mid \L \in \Pic{T} \: \struct{T}^{n+1} \xrightarrowdbl{(s_0, \dots, s_n)} \L \: \text{ i.e. } \: s_0, \dots, s_n \in \Gamma(X, \L) \text{ generate} \} / \cong \]
where $(\L, s_0, \cdots, s_n) \cong (\L', s_0', \dots, s_n')$ if there is an isomorphism $\alpha : \L \to \L'$ with $\alpha(s_i) = s_i'$. 

\begin{theorem}
$\P^n_R$ represents this functor, $\Hom{\Sch_R}{T}{\P^n_R} = F(T)$. 
\end{theorem}

\begin{proof}
Given $\varphi : T \to \P^n_R$ we get $\L = \varphi^* \struct{\P^n_R}(1)$ and $s_i  = \varphi^*(T_i)$. 
\bigskip\\
Conversely, given $(\L, s_0, \dots, s_n)$ and $U \subset T$ and 
\end{proof}

\begin{theorem}
If $R$ is Noetherian and $X$ is proper over $R$ and $\L$ is ample on $X$ then, 
\[ X \cong \Proj{\Gamma_*(X, \L)} \]
and $\Gamma_*(X, \L)$ is a finitely-generated graded $R$-algebra whose degree zero part is a finite $R$-module. 
\end{theorem}

\begin{rmk}
We will prove this using cohomology. 
\end{rmk}

\section{Cohomology}

\begin{theorem}
$\Mod{\struct{X}}$ is a Grothendieck abelian category so there are enough injectives. 
\end{theorem}

\begin{definition}
Therefore, we can produce the right-derived functors $H^i(X, -)$ of the global sections functor,
\[ \Gamma(X, -) : \Mod{\struct{X}} \to \Mod{\Gamma(X, \struct{X})} \]
where $(X, \struct{X})$ is a ringed space. Since this is right-exact we find $H^0(X, -) = \Gamma(X, -)$. 
\end{definition}

\begin{definition}
Furthermore, given a morphism $f : X \to Y$ we can produce $R^i f_* : \Mod{\struct{X}} \to \Mod{\struct{Y}}$ the right-derived functors of $f_* : \Mod{\struct{X}} \to \Mod{\struct{Y}}$. 
\end{definition}

\begin{rmk}
$\Ab(X) = \Mod{\underline{\Z}}$ so we may apply the theory of cohomology of $\struct{X}$-modules to the ringed space $(X, \underline{\Z})$ to get a cohomology theory for abelian sheaves.
\end{rmk}

\begin{lemma}[locality of cohomology]
Given $\xi \in H^p(X, \F)$ with $p > 0$ there exists an open covering,
\[ X = \bigcup_{i \in I} U_i \]
s.t. $\xi |_{U_i} = 0$ for each $i \in I$. 
\end{lemma}

\begin{proof}

\end{proof}

\begin{rmk}
The pullback is defined as follows, 
\end{rmk}

\section{Feb 20}

\subsection{Cech Cohomology}

\renewcommand{\U}{\mathfrak{U}}

For any open covering $\U$ of a space $X$ and a sheaf $\F$ there is a simplicial abelian group,
\begin{center}
\begin{tikzcd}
\prod_{i_0 \in I} \F(U_{i_0})
\end{tikzcd}
\end{center}
Then $\check{C}^\bullet(\U, \F)$ is the complex associated to the cosimplicial object. 


\begin{ex}
Given an exact sequence of sheaves,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \F \arrow[r] & \G \arrow[r] & \H \arrow[r] & 0
\end{tikzcd}
\end{center}
An obstruction to lifting a section $s \in \Gamma(X, \H)$ is a cocycle in $\check{C}^1(\U, \F)$. 
\end{ex}

\begin{lemma}
Cech cohomology vanishes on injective objects in the category of presheaves.
\end{lemma}

\begin{corollary}
As a functor ON THE CATEGORY OF PRESHEAVES $\check{H}^i(\U, -)$ are the right-derived functors of $\check{H}^0(\U, -)$.
\end{corollary}

\begin{lemma}
Given a ringed space, $(X, \struct{X})$ and $B$ is a basis of top and Cov a set of coverings s.t.
\begin{enumerate}
\item $\U$ in cov implies that its union and all finite intersections are in B
\item for $U$ basis the coverings of U in Cov are cofinal 
\end{enumerate}
If $\F \in \shMod{\struct{X}}$ and
\[ (*) \forall \U \in Cov : \: \check{H}^p(\U, \F) = 0 \]
Then $H^p(\U, \F) = 0$ for any $U$ in the basis. 
\end{lemma}

\section{Feb 25}

\begin{lemma}
Let $\U$ be an open covering of $X$ and $\F \in \shMod{\struct{X}}$ s.t. $H^p(U_{i_1} \cap \cdots U_{i_{n}}, \F) = 0$ for all finite intersections. Then $H^p(X, \F) = \check{H}^p(X, \F)$ for all $p \ge 0$.
\end{lemma}

\begin{proof}
See proof in Hartshorne Ex. It goes as follows,
\begin{enumerate}
\item Use an exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \F \arrow[r] & \I \arrow[r] & \G \arrow[r] & 0
\end{tikzcd}
\end{center}
with $\I$ injective.
\item Show for any sheaf $\check{H}^0(X,\F) = H^0(X, \F)$ just by the sheaf property.
\item By the assumptions, there is an exact sequence on check complexes,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \check{C}^\bullet(\U, \F) \arrow[r] & \check{C}^\bullet(\U, \I) \arrow[r] & \check{C}^\bullet(\U, \G) \arrow[r] & 0
\end{tikzcd}
\end{center}
\item this gives a long exact sequence of Cech cohomology
\item use this exact sequence plus $\check{H}^p(\U, \I) = 0$ for $p > 0$ (since flasque) to show that $\check{H}^p(\U, \G) = \check{H}^{p+1}(\U, \F)$ and $\check{H}^1(\U, \F) = \coker{\check{H}^0(\U, \I) \to \check{H}^0(\U, \G)}$
\item use long exact sequence of $H^p(U_{i_0, \dots, i_n}, -)$ to show that $\G$ also satisfies the hypotheses.
\item use long exact sequence of $H^p(X, -)$ to show that the above hold for usual cohomology.
\item then by induction we get $\check{H}^{p+1}(\U, \F) = \check{H}^p(\U, \G) = H^p(X, \G) = H^{p+1}(X, \F)$ and the base case holds since they are both kernels.
\end{enumerate}
\end{proof}

\begin{corollary}
Let $X$ be a scheme whose diagonal is affine (for example a separated scheme). Let $\U$ be a covering of affine opens and $\F$ a quasi-coherent $\struct{X}$-module. Then,
\[ H^p(X, \F) = \check{H}^p(X, \F) \]
\end{corollary}

\begin{rmk}
There is a Cech to cohomology spectral sequence,
\[ E_2^{p,q} = \check{H}^p(\U, \underline{H}^q(\F)) \implies H^{p+q}(X, \F) \]
\end{rmk}

\begin{corollary}
Let $f : X \to Y$ be a squasi-compact quasi-separated morphism of schemes. Then $R^i f_*$ sends quasi-coherent mofules to quasi-coherent modules.
\end{corollary}

\begin{lemma}
Let $f : X \to Y$, $F \in \shMod{\struct{X}}$ then $R^p f_* \F$ is the sheaf associated to the presheaf,
\[ V \mapsto H^i(f^{-1}(V), \F) \]
\end{lemma}

\begin{prop}
We define the following modifications to the Cech complex,
\[ \check{C}^\bullet_{\text{alt}} \quad \text{is elements of the form} \quad (s_{i_0 \dots i_p}) \text{ which are antisymmetric and vanish if any two indicies agree} \]
and the ordered check complex for a total order $<$ on $I$,
\[ \check{C}^p_{\text{ord}} = \prod_{i_0  < \cdots < i_p} \F(U_{i_0 \cdots i_p}) \]
There are the following relations between Cech complexes,
\begin{center}
\begin{tikzcd}
\check{C}^\bullet_{\text{alt}}(\U, \F) \arrow[r, hook, "\text{include}"] \arrow[rr, bend left] & \check{C}^\bullet(\U, \F) \arrow[r, "\text{project}"] & \check{C}^\bullet_{\text{ord}}(\U, \F) 
\end{tikzcd}
\end{center}
the curves arrow is an isomorphism of complexes and the horizontal arrows are homotopy equivalences. 
\end{prop}

\section{Feb. 27}

\begin{prop}
Let $R$ be a Noetherian ring and $\F$ a coherent sheaf on $\P^n_R$. Then,
\begin{enumerate}
\item $\exists r \ge 0 : \exists m \in \Z$ and a surjection $\struct{X}(m)^{\oplus r} \onto \F$
\item $H^i(\P^n_R, \F) = 0$ for $i \notin [0, n]$
\item $H^i(\P^n_R, \F)$ is a finite $R$-module
\item for $i > 0$, $H^i(\P^n_R, \F(d)) = 0$ for any $d \ge d_0(\F)$
\item $\bigoplus_{d \ge 0} H^0(\P^n_R, \F(d))$ is a finite $P = R[T_0, \dots, T_n]$-module.
\end{enumerate}
\end{prop}

\begin{proof}
Recall that $\struct{X}(1)$ is ample so $\F \otimes \struct{X}(d)$ is generated by global sections for sufficiently large $d$ and thus we get $\struct{X}^{\oplus r} \onto \F \otimes_{\struct{X}} \struct{X}(d)$ and thus $\struct{X}(-d)^{\oplus r} \onto \F$.
\bigskip\\
Note that $\P^n_R = \bigcup_i D_+(T_i)$ which is an open cover of $n+1$ affines so by Cech cohomology, cohomology vanishes above $n$.
\bigskip\\
Now we apply descending induction since $H^{n+1}(\P^n_R, \F) = 0$. Now we assume (3) and (4) for degree $k+1$. For a coherent sheaf $\F$ consider the exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \G(d) \arrow[r] & \struct{X}(m + d)^{\oplus n} \arrow[r] & \F(d) \arrow[r] & 0
\end{tikzcd}
\end{center}
then, from the LES we get,
\begin{center}
\begin{tikzcd}
H^k(\P^n_R, \struct{X}(m+d)^{\oplus r}) \arrow[r] & H^k(\P^n_R, \F(d)) \arrow[r] & H^{k+1}(\P^n_R, \G(d))
\end{tikzcd}
\end{center}
For the case $d = 0$ we assume that $H^{k+1}(\P^n_R, \G)$ is a finite $R$-module and, by computation, so is $H^k(\P^n_R, \struct{X}(m)^{\oplus r})$ and thus $H^k(\P^n_R, \F)$ is a finite $R$-module. For $d \gg 0$ then we assume that $H^{k+1}(\P^n_R, \G(d)) = 0$ for sufficiently large $d$. Futhermore, for $k > 0$ we computed that $H^k(\P^n_R, \struct{X}(m)^{\oplus r}) = 0$ for $d \ge m$ and thus we see that $H^k(\P^n_R, \F(d)) = 0$ for sufficiently large $d$ proving (3) and (4).
\bigskip\\
Finally, we also use descending induction and conisder the exact sequence,
\begin{center}
\begin{tikzcd}
\bigoplus_{d \ge 0} H^0(\P^n_R, \struct{X}(m+d)^{\oplus r}) \arrow[r] & \bigoplus_{d \ge 0} H^0(\P^n_R, \F(d))  \arrow[r] & \bigoplus_{d \ge 0} H^0(\P^n_R, \G(d)) 
\end{tikzcd}
\end{center}
By computation, the first term is a submodule of a finite $P$-module and the last term is zero is sufficiently large degrees. Thus the middle term $M$ has a f.g. $P$-submodule $M'$ such that $M / M'$ is finite as an $R$-module so $M$ is a f.g. $P$-module. 
\end{proof}

\begin{lemma}
Let $f : X \to Y$ be an affine morphism of schemes. Then $H^p(X, \F) = H^p(Y, f_* \F)$ for $\F$ quasi-coherent.
\end{lemma}

\begin{proof}
We use the Grothendieck spectral sequence and not that for $f : X \to Y$ affine and $\F$ quasi-coherent we have $R^p f_* \F = 0$ for $p > 0$ since quasi-coherent higher cohomology vanishes on affine schemes. 
\end{proof}

\begin{example}
If $X$ is a projective scheme over a Noetherian ring $R$. For closed immersion $X \embed \P^n_R$,
\[ H^i(X, \F) = H^i(\P^n_R, j_* \F) \]
for quasi-coherent $\struct{X}$-modules.
\end{example}

\begin{lemma}
If $\F : X \to Y$ is finite and $X$ and $Y$ are Noetherian then $f_*$ preserves coherent sheaves.
\end{lemma}

\begin{proof}
Since $f$ is affine it preserves quasi-coherent modules. Since the morphism is additionally finite on rings so it changes finite modules to finite modules on the affine open level. 
\end{proof}

\begin{cor}
For any coherent $\F$ on a scheme $X$ projective over Noetherian $R$ then the above proposition holds with $\F(d) = \F \otimes_{\struct{X}} \L^{\otimes d}$ where $\L$ is an ample line bundle.
\end{cor}

\begin{rmk}
Let $X$ be Noetherian over Noetherian $R$ then let $n = \max\{ \dim X_s \mid s \in \Spec{R} \}$ then $H^i(X, \F) = 0$ for $i > n$. Warning, this is not true for quasi-projective $X$ over a Noetherian ring. For example, consider $X = \A^2_\Q \setminus \{ 0 \} \to \A^2_\Q$ is quasi-projective over $R = \Q[x,y]$ but $X$ does not have finitely generated cohomology. 
\end{rmk}

\begin{lemma}
Let $X$ be projective over a field $k$ then $X$ has an open cover by $\dim{X} + 1$ affines.
\end{lemma}

\begin{proof}
Choose $X \embed \P^n_k$ show that we can find $F \in k[T_0, \dots, T_n]_{d}$ s.t. $\dim{(X \cap V(F))} < \dim{X}$. Namely, choose $F$ not vanishing at the generic points of $X$ by graded prime avoidance. Then we can repeat to get,
\[ X \cap V(F_1) \cap \cdots \cap V(F_{\dim{X} + 1}) = \empty \]
and thus,
\[ X = (X \cap D_+(F)) \cup \cdots \cup (X \cap D_+(F_{\dim{X}+1}) \]
where these factors are affine. 
\end{proof}

\begin{cor}
$H^i(X, \F) = 0$ for $i > \dim{X}$ for $\F$ quasi-coherent on $X$ projective over a field.
\end{cor}

\begin{theorem}[Grothendieck]
If $(X, \struct{X})$ is a Noetherian ringed space then $H^i(X, \F) = 0$ for $i > \dim{X}$ and any $\struct{X}$-module $\F$. 
\end{theorem}

\begin{rmk}
Since we can always choose $\struct{X} = \underline{\Z}$ in the above theorem applies to all abelian sheaves. 
\end{rmk}

\begin{lemma}
If $X$ is qc and qs then for $\F_i$ quasi-coherent and $I$ an \textit{arbitrary} index set,
\[ H^p(X, \bigoplus_{i \in I} \F_i) = \bigoplus_{i \in I} H^p(X, \F) \]
\end{lemma}

\begin{rmk}
The above is always true in general for \textit{finite} $I$ since biproducts preserve exact sequences and injectives.
\end{rmk}

\begin{proof}
It is enough to show the above for Cech cohomology for finite affine open covers. Thus, iti s enough to show that,
\[ \left( \bigoplus_{i \in I} \F_i \right)(U) = \bigoplus_{i \in I} \F_i(U) \]
If $X$ is affine open in $X$ (WAIT WHAT??)
\end{proof}

\subsection{Duality}

\begin{lemma}
Let $R$ be a ring, $M$ an $R$-module, and $X$ qc + sep over $R$. And some $n \ge 0$ such that $H^{n+1}(X, \F)$ for all $\F$ quasi-coherent. Then, the functor $F : \QCoh{\struct{X}} \to \Mod{R}$ via $\F \mapsto \Hom{R}{H^n(X, \F)}{N}$ is representable by some $\omega_{X/R, M} \in \QCoh{\struct{X}}$. That is,
\[ F(-) = \Hom{\struct{X}}{-}{\omega_{X / R, M}} \]
\end{lemma}

\begin{example}
For $X = \Spec{A}$ then we have $\wt{N} \mapsto \Hom{R}{N_R}{M}$. Then,
\[ \Hom{R}{N_R}{M} = \Hom{A}{N}{\Hom{R}{A}{M}} \]
so we would have $\omega_{A/R,M} = \wt{\Hom{R}{A}{M}}$. 
\end{example}

\begin{proof}
First note that $F$ acts on direct sums as,
\[ F \left( \bigoplus_{i \in I} \F_i \right) = \Hom{R}{H^n(X, \bigoplus_{i \in I} \F_i)}{M} = \Hom{R}{\bigoplus_{i \in I} H^n(X, \F_i)}{M} = \prod_{i \in I} \Hom{R}{H^n(X, \F_i)}{M} \]
Furthermore, $F$ takes epis to monos since given an exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \F_1 \arrow[r] & \F_2 \arrow[r, two heads] & \F_3 \arrow[r] & 0
\end{tikzcd}
\end{center}
then we get,
\begin{center}
\begin{tikzcd}
H^n(X, \F_2) \arrow[r, two heads] & H^n(X, \F_3) \arrow[r] & H^{n+1}(X, \F_1) = 0
\end{tikzcd}
\end{center}
These together shows that $F$ takes all small colimits to products. Then if $F$ satisfies some mild set-theoretic condition then the adjoint functor theorem gives $\omega_{X/R, M}$ as a funtor on $M$. The ideal goes as follows. We take,
\[ \omega_{X/R,M} = \colim_{\C} \F \]
where $\C$ is a category of pairs $(\F, \alpha)$ where $\F$ is a quasi-coherent sheaf and $\alpha \in F(\F)$ and $\Hom{\C}{(\F, \alpha)}{\G, \beta)} = \varphi : \F \to \G$ and $\varphi^* \beta = \alpha$. However, this category is big so we cannot take a total colimit over it. We must resolve this set-theoretic issue. 
\bigskip\\
In the case $R$ is Noetherian and $X$ is finite type over $R$ then any quasi-coherent $\F$ can be writen as a filtered colimit,
\[ \F = \colim_{i \in I} \F_i \]
with $\F_i$ coherent. This means that in the colimit defining $\omega_{X/R,M}$ we can restrict to only coherent $\F$ and there is a set of isomorphism classes of coherent sheaves. 
\end{proof}

\section{Mar 3}

\begin{rmk}
Here $X$ will be a Noetherian scheme.
\end{rmk}

\begin{lemma}
Let $X$ be a Noetherian scheme. Any presheaf on $\QCoh{\struct{X}}$ which transforms colimits into limits is representable.
\end{lemma}

\begin{lemma}
Any quasi-coherent module $\F$ on $X$ is a filtered colimit of coherent $\struct{X}$-modules. (In fact $\F$ is the rising union of its coherent submodules). 
\end{lemma}

\begin{cor}
For any $\F \in \QCoh{\struct{X}}$ there exists an exact sequence,
\begin{center}
\begin{tikzcd}
\bigoplus_{j \in J} \G_j \arrow[r] & \bigoplus_{i \in I} \F_i \arrow[r] & 0 
\end{tikzcd}
\end{center}
where $\F_i$ and $\G_j$ are coherent. 
\end{cor}

\begin{lemma}
There is a set of isomorphism classes of coherent $\struct{X}$-modules.
\end{lemma}

\begin{prop}
Let $X$ be finite type over $R$ Noetherian. Let $n$ be an integer s.t. $H^{n+1}(X, \F) = 0$ for any $\F \in \QCoh{\struct{X}}$. Then, for any $R$-module $M$, the functor,
\[ \F \mapsto \Hom{R}{H^n(X, \F)}{M} \]
is representable by $\omega_{X/R,M,n} \in \QCoh{\struct{X}}$ i.e.
\[ \Hom{R}{H^n(X, \F)}{M} = \Hom{\struct{X}}{\F}{\omega_{X / R, M, n}} \]
functorially in $\F \in \QCoh{\struct{X}}$. 
\end{prop}

\begin{rmk}
For any integer $p$ and $\F = \colim \F_i$ is a filted colimit of $\struct{X}$-modules on a Noetherian scheme (or qcqs scheme) we have,
\[ H^p(X, \F) = \colim H^p(X, \F_i) \]
\end{rmk}

\begin{thm}
If $k$ is a field and $n \ge 0$. Then $\omega_{\P^n_k/k, k, n} = \struct{\P^n_k}(-n-1)$. In particular,
\[ H^n(\P^n_k, \F)^\vee = \Hom{\struct{X}}{\F}{\struct{\P^n_k}(-n-1)} \]
functorially in $\F \in \QCoh{\struct{\P^n_k}}$.
\end{thm}

\begin{proof}
It suffices to show for $\F$ coherent. Pick a resolution, 
\begin{center}
\begin{tikzcd}
\bigoplus\limits_{j = 1}^s \struct{\P^k_k}(e_j) \arrow[r] & \bigoplus\limits^r_{j = 1} \struct{\P^n_k}(d_i) \arrow[r] & \F \arrow[r] & 0
\end{tikzcd}
\end{center}
Since $H^n(\P^n_k, -)$ is right exact (by dimension vanishing) we get,
\begin{center}
\begin{tikzcd}
\bigoplus\limits_{j = 1}^s H^n(\P^n_k, \struct{\P^k_k}(e_j)) \arrow[r] & \bigoplus\limits^r_{j = 1} H^n(\P^n_k, \struct{\P^n_k}(d_i)) \arrow[r] & H^n(\P^n_k, \F) \arrow[r] & 0
\end{tikzcd}
\end{center}
Then taking $k$-linear duals,
\begin{center}
\begin{tikzcd}[column sep = small]
\bigoplus\limits_{j = 1}^s H^n(\P^n_k, \struct{\P^k_k}(e_j))^\vee \arrow[d, equals] & \arrow[l] \bigoplus\limits^r_{j = 1} H^n(\P^n_k, \struct{\P^n_k}(d_i))^\vee \arrow[d, equals] & \arrow[l] H^n(\P^n_k, \F) & 0 \arrow[l]
\\
\bigoplus\limits_{j = 1}^s H^n(\P^n_k, \struct{\P^k_k}(- e_j - n - 1)) &  \arrow[l, "t"]  \bigoplus\limits^r_{j = 1} H^n(\P^n_k, \struct{\P^n_k}(-d_i - n- 1)) & \arrow[l] \arrow[u, equals, dashed] \Hom{\struct{\P^n_k}}{\F}{\struct{\P^n_k}(-n-1)} & 0 \arrow[l] 
\end{tikzcd}
\end{center}
Note that,
\[ \struct{\P^n_k}(-d - n- 1) = \shHom{\struct{\P^n_k}}{\struct{\P^n_k}(d)}{\struct{\P^n_k}(-n-1)} \]
gives the above ``transpose'' map $t$ above by functoriality in the first argument along with the fact,
\[ H^0(\P^n_k, \shHom{\struct{\P^n_k}}{\F}{\G}) = \Hom{\struct{X}}{\F}{\G} \]
\end{proof}

\section{March 5}

\subsection{Serre Duality for $\P^n_k$ Continued.}

Write $\omega = \struct{\P^n_k}(-n-1)$ and $t : H^n(\P^n_k, \omega) \to k$ via the Check class,
\[ \frac{1}{T_0 \cdots T_n} \mapsto 1 \]
Then we know that $\omega$ represents the functor,
\[ \F \mapsto H^n(\P^n_k, \F)^\vee \]
on $\QCoh{\struct{X}}$ with universal object $t$. 

\begin{thm}
For coherent modules $\F$, there is an isomorphism,
\[ H^{n-i}(\P^n_k, \F)^\vee = \Ext{i}{\struct{X}}{\F}{\omega} \]
\end{thm}

\begin{proof}
Both sides are contravariant $\delta$-functors in $\F$ so it suffices to show that both are universal for which it suffices to show that both are coeffecable. For any coherent sheaf $\F$ we can find,
\[ \struct{\P^n_k}(-q)^{\bigoplus r} \onto \F \]
and then for $i > 0$ we know,
\[ H^{n-i}(\P^n_k, \struct{\P^n_k}(-q)) = 0 \quad \text{ and } \quad \Ext{i}{\struct{X}}{\struct{\P^n_k}(-q)}{\omega} =  H^i(\P^n_k, \omega(q)) = H^i(\P^n_k, \struct{\P^n_k}(-n-1 + q)) = 0 \]
for sufficiently large $q \gg 0$ using our Cech calculations.
\end{proof}

\begin{lemma}
Let $(X, \struct{X})$ be a ringed space and $\E$ a finite locally free $\struct{X}$-module. Then.
\[ \Ext{i}{\struct{X}}{\E}{\G} = H^i(X, \E^\vee \otimes_{\struct{X}} \G) \]
where $\E^\vee = \shHom{\struct{X}}{\E}{\struct{X}}$.
\end{lemma}

\begin{proof}
Choose an injective resolution $\G \to \I^\bullet$ then,
\begin{align*}
\Hom{\struct{X}}{\E}{\I^\bullet} = \Gamma(X, \shHom{\struct{X}}{\E}{\I^\bullet}) = \Gamma(X, \E^\vee \otimes_{\struct{X}} \I^\bullet)
\end{align*}
Now I claim that $\E^\vee \otimes_{\struct{X}} \I^\bullet$ is an injective resolution over $\E^\vee \otimes_{\struct{X}} \G$. To see this, we use,
\[ \Hom{\struct{X}}{-}{\E^\vee \otimes_{\struct{X}} \I^\bullet} = \Hom{\struct{X}}{\E \otimes_{\struct{X}} -}{\I^\bullet} \]
but $I^\bullet$ is injective and $\E$ is flat so this is an exact functor. Taking cohomology of the first equality proves the lemma.
\end{proof}

\begin{rmk}
We could also just say, $\Hom{\struct{X}}{\E}{-} = \Gamma(X, \E^\vee \otimes_{\struct{X}} - )$ so taking their derived functors gives the same thing. However, $\E^\vee \otimes_{\struct{X}} - $ is exact so taking derived functors of $\Gamma(X, \E^\vee \otimes_{\struct{X}} - ) = H^i(X, \E^\vee \otimes_{\struct{X}} - )$. 
\end{rmk}

\begin{rmk}
The perfect pairings,
\[ \Ext{i}{\struct{\P^n_k}}{\F}{\omega} \times H^{n-i}(\P^n_k, \F) \to H^n(\P^n_k, \omega) \xrightarrow{t} k \]
factors through $H^n(\P^n_k, \omega)$. The first map can be realized as composition of ext classes or a cup product. 
\end{rmk}

\begin{rmk}
If $\F$ is locally free then we have a diagram,
\begin{center}
\begin{tikzcd}
H^i(\P^n_k, \F^\vee \otimes_{\struct{\P^n_k}} \omega) \times H^{n-i}(\P^n_i, \F) \arrow[r] \arrow[d] & k 
\\
H^n(\P^n_k, \F \otimes_{\struct{\P^n_k}} \F^\vee \otimes_{\struct{\P^n_k}} \omega) \arrow[r] & H^n(\P^n_k, \omega) \arrow[u, "t"]
\end{tikzcd}
\end{center}
which gives the same pairing using the unique evaluation pairing, 
\[ \F \otimes_{\struct{\P^n_k}} \F^\vee = \F \otimes_{\P^n_k} \shHom{\struct{\P^n_k}}{\F}{\struct{\P^n_k}} \to \struct{\P^n_k} \]
\end{rmk}

\subsection{Dualizing Sheaves in General}

\begin{defn}
Let $X$ be proper over $k$ and $\dim{X} = n$. A \textit{dualizing sheaf} $(\omega_X, t)$ is a pair consisting of a coherent $\struct{X}$-module $\omega_X$ and a map $t : H^n(X, \omega_X) \to k$ which represents the functor,
\[ \F \mapsto H^n(X, \F)^\vee \]
\end{defn}

\begin{rmk}
We have proven, by abstract nonsense, that such a \textit{quasi-coherent} dualizing sheaf exists but now we want to know when such a module is actually \textit{coherent}. 
\end{rmk}

\begin{rmk}
Consider the case that $X$ is the disjoint union of a curve and a surface. Then $H^2(X, -)$ ignores cohomology on the curve since it vanishes above $H^1(X, -)$. Thus the dualizing sheaf will be zero on the curve. To fix this one looks for a dualizing complex,
\[ \omega_X^\bullet \in D^b(\QCoh{\struct{X}}) \]
such that $H^i(X, \F)$ is dual to $\Ext{-i}{\struct{X}}{\F}{\omega_X^\bullet}$. 
\end{rmk}

\begin{theorem}
Every projective scheme $X / k$ has a dualizing module $\omega_X$ and for any closed immersion $\iota : X \embed \P^n_k$,
\[ \iota_* \omega_X \cong \shExt{c}{\struct{X}}{\iota_* \struct{X}}{\omega_{\P^n_k}} \]
where $c = n - \dim{X}$ is the codimension. 
\end{theorem}

\begin{lemma}
Let $\iota : X \to Y$ be a clsoed immersion of schemes then $\iota_* : \QCoh{\struct{X}} \to \QCoh{\struct{X}}$ defines an equivalence of categories onto its image which is the full subcategory of quasi-coherent $\struct{Y}$-modules $\F$ such that $\I \cdot \F = 0$ for $\I = \ker{(\struct{Y} \to \iota_* \struct{X})}$.
\end{lemma}

\begin{rmk}
If $X$ and $Y$ are Noetherian schemes, then the above holds also for coherent modules. 
\end{rmk}

\begin{rmk}
If $f : X \to Y$ is an affine morphism, $\QCoh{\struct{X}}$ is the category of pairs $(\F, \gamma)$ with $\F \in \QCoh{\struct{Y}}$ and $\gamma : f_* \struct{Y} \otimes_{\struct{X}} \F \to \F$ gives $\F$ a $f_* \struct{X}$-module structure meaning $f_* \struct{X}$ is a monoid object and $f_* \struct{X} \otimes_{\struct{X}} \F \to \F$ is an action of a monoid object.
\end{rmk}

\section{Mar. 12}

\begin{lemma}
Let $A$ be Noetherian and $M, N$ be finite-presentation $A$-modules and $X = \Spec{A}$. Then,
\[ \shHom{\struct{X}}{\wt{M}}{\wt{N}} = \wt{\Hom{A}{M}{N}} \]
\end{lemma}

\begin{proof}
The isomorphism,
\[ \Hom{A}{M}{N}_f = \Hom{A_f}{M_f}{N_f} \]
for finitely-presented modules patch together on the open sets $D(f)$ to give an isomorphism,
\[ \wt{\Hom{A}{M}{N}} = \shHom{\struct{X}}{\wt{M}}{\wt{N}} \]
\end{proof}

\begin{lemma}
Let $A$ be Noetherian and $M, N$ be finite $A$-modules and $X = \Spec{A}$. Then,
\[ \shExt{i}{\struct{X}}{\wt{M}}{\wt{N}} = \wt{\Ext{i}{A}{M}{N}} \]
\end{lemma}

\begin{proof}
This holds for $i = 0$ by the above. Then we apply dimension-shifting to prove this in general. Given a 
\end{proof}

\begin{lemma}
For $p < \dim{P} - \dim{X}$ we have,
\[ \shExt{p}{\struct{X}}{\iota_* \struct{X}}{\omega_P} = 0 \]
\end{lemma}

\begin{proof}
This reduced to the algebra question, given $B = k[x_1, \dots, x_n] \onto A$ then,
\[ \Ext{p}{B}{A}{B} = 0 \] 
for $p < \dim{B} - \dim{A}$. To see this, recall we have $\iota : X \embed P = \P^n_k$ then $X \cap D_{+}(T_i) \subset X$ and $D_{+}(T_i) = \Spec{B}$. Then, $\omega_P|_{D_+(T_i)} = \struct{X} |_{D_+(T_i)} = \wt{B}$. Furthermore, $\iota : X \embed P$ is affine (closed immersion) so $X \cap D_+(T_i) = \Spec{A}$ for $A = B/I$.
\bigskip\\
Since $B$ is Cohen-Macaullay we have vanishing for,
\[ \mathrm{depth}_{I}(A) \ge \dim{B} - \dim{A} \]
\end{proof}

\begin{proof}

\end{proof}

\begin{theorem}
Every projective scheme $X / k$ has a dualizing module $\omega_X$ and for any closed immersion $\iota : X \embed \P^n_k$,
\[ \iota_* \omega_X \cong \shExt{c}{\struct{X}}{\iota_* \struct{X}}{\omega_{\P^n_k}} \]
where $c = n - \dim{X}$ is the codimension. 
\end{theorem}


\begin{prop}
If $\iota : X \to Y$ is a closed immersion then $\iota^* \iota_* \F = \F$ for any $\struct{X}$-module $\F$ and if $\I \cdot \G = 0$ for some $\struct{Y}$-module $\F$ then $\G = \iota_* \iota^* \G$ where $\I = \ker{(\struct{Y} \to \iota_* \struct{X})}$. 
\end{prop}

\section{Local Property}

\begin{defn}
A property $P$ of ring maps is \textit{local} if,
\begin{enumerate}
\item $P(R \to A) \implies P(R_f \to A_f)$ for all $f \in R$
\item $P(R_f \to A)$ for some $f \in R$ then $P(R \to A_a)$ for any $a \in A$
\item if $P(R \to A_{a_i})$ for $(a_1, \dots, a_r) = A$ then $P(R \to A)$.
\end{enumerate}
\end{defn}

\begin{defn}
We say a morphism of schemes $f : X \to Y$ is locally $P$ for some local property $P$ if for each $x \in X$ there is an affine open $U = \Spec{A}$ with $x \in U \subset X$ and $V = \Spec{R}$ with $V \subset Y$ with $f(U) \subset V$ such that $P(R \to A)$. 
\end{defn}

\begin{lemma}
If $f : X \to Y$ is locally $P$ then for any affine opens $U \subset X$ and $V \subset Y$ with $f(U) \to V$ then $P(\struct{Y}(V) \to \struct{X}(U))$. 
\end{lemma}

\begin{rmk}

\end{rmk}

\section{Smooth Maps}

\begin{defn}
A ring map $R \to A$ is \textit{smooth} if it is of finite presentation,
\[ A \cong R[x_1, \dots, x_n]/I \]
where $I$ is finitely generated. Then consider,
\[ I / I^2 \xrightarrow{\d} \bigoplus_{i = 1}^n A \d{x_i}  \]
given by,
\[ f \mapsto \d{f} = \sum \pderiv{f}{x_i} \d{x_i} \]
Then $\d$ is injective and its cokernel is a projective $A$-module. Since $K = \coker{\d}$ is projective an finitely generated then it is locally free so it has a rank function. We say that $R \to A$ is \textit{smooth of relative dimension} $n$ if $K$ is of constant rank $n$.
\end{defn}

\begin{rmk}
Smoothness satisfies the following,
\begin{enumerate}
\item local
\item preserved under composition
\item preserved uncer base change 
\end{enumerate}
\end{rmk}

\begin{example}
Take $R \to R[x_1, \dots, x_n] / (f_1, \dots, f_c)$ such that,
\[ \det{ \left( \pderiv{f_j}{x_i} \right)_{\substack{i = 1, \dots, c \\ j = 1, \dots, c} }} \]
maps to an invertible element of $A$ under $R[x_1, \dots, x_n] \to A$. 
Then,
\[ \frac{(f_1, \dots, f_c)}{(f_1, \dots, f_c)^2} \to \bigoplus_{i = 1}^n A \d{x_i} \to \coker{\d} \to 0 \]
makes $\coker{}$ projective since the matrix for the map,
\[ f_i \mapsto \pderiv{f_i}{x_j} \d{x_j} \]
in the basis $\{ f_i \}$ and $\{ \d{x_j} \}$ is invertible. Therefore, the cokernel is locally free. We think of this situation as $f = (f_1, \dots, f_c)$ defining a map $R[y_1, \dots, y_c] \to R[x_1, \dots, x_n]$ via $y_i \mapsto f_i$ thus we get a morphism $f : \A^n_R \to \A^c_R$ then $\Spec{R[x_1, \dotsm x_n]/(f_1, \dots, f_c)}$ is the fiber above the point zero $(y_1, \dots, y_c)$. 
\bigskip\\ 
In differential geometry, such a map $f : \mathbb{C}^n \to \mathbb{C}^{c}$ is a submersion since the Jacobian matrix has full rank. Therefore,
\begin{center}
\begin{tikzcd}
f^{-1}(\{0 \}) \arrow[d] \arrow[r, hook] & \mathbb{C}^n \arrow[d, "f"] \arrow[d]
\\
\{ 0 \} \arrow[r, hook] & \mathbb{C}^{c}
\end{tikzcd}
\end{center}
Then $f^{-1}(\{ 0 \})$ is a smooth manifold by the implicit function theorem. We call this situation standard smooth.
\end{example}

\begin{lemma}
A map $R \to A$ is smooth if and only if there exist $a_i$ s.t. $(a_1, \dots, a_r) = A$ and $R \to A_{a_i}$ is standard smooth.
\end{lemma}

\begin{defn}
For a standard smooth ring map, $R \to A$ we can factor,
\begin{center}
\begin{tikzcd}
R \arrow[r] \arrow[rd] & R[x_{c+1}, \dots, x_n] \arrow[d]
\\
& R[x_1, \dots, x_n]/(f_1, \dots, f_c)
\end{tikzcd}
\end{center}
Then the downward map is \etale.
\end{defn}

\begin{defn}
A smooth morphism of schemes is a morphism which is locally smooth. 
\end{defn}


\begin{rmk}
Using the previous lemma, for any smooth morphism of schemes $X \to Y$ it is locally standard smooth so we can factor,
\begin{center}
\begin{tikzcd}
X \arrow[dd, "f"] & U \arrow[dd] \arrow[l, hook]  \arrow[dr, "\mathrm{etale}"]
\\
& & \A_V^d \arrow[dl, "\mathrm{projection}"]
\\
Y & V \arrow[l, hook] 
\end{tikzcd}
\end{center}
\end{rmk}

\begin{defn}
A variety $X$ over $k$ is smooth iff $X \to \Spec{k}$ is smooth.
\end{defn}

\begin{defn}
A locally noetherian scheme $X$ is \textit{regular} or \textit{nonsingular} iff $\stalk{X}{x}$ is regular at each $x \in X$.
\end{defn}

\begin{rmk}
For locally Noetherian schemes it suffices to check regularity on the closed points. 
\end{rmk}

\begin{theorem}
If $X \to \Spec{k}$ is smooth then $X$ is regular. 
\end{theorem}

\begin{theorem}
If $k$ is perfect then a variety is smooth iff it is regular.
\end{theorem}

\begin{example}
Let $k = \mathbb{F}_p(t)$ then take $\Spec{k[x]/(y^2 - (x^p - t))}$ which is regular but not smooth. Consider,
\[ \d{(y^2 - x^p + t)} = 2 y \d{y} + 0 \]
and thus we have,
\[ (f)/(f^2) \mapsto A \d{x} \oplus A \d{y} \]
which is injective but the cokernel is $A \oplus A / y A$ but $A / y A$ has torsion so cannot be projective and thus not smooth.
\bigskip\\
However, we just need to check regularity at $(y, x^p - t) = (y) \subset A$ which is a height one ideal and generated by one element so $A_{(y)}$ is regular.  
\end{example}

\section{Differentials}
\begin{rmk}
See Tags O8RL, O8RT.
\end{rmk}


\begin{defn}
For a ring map $\varphi : R \to A$ the $A$-module of differentials $\Omega_{A/R}$ is generated by the symbols $\d{a}$ for $a \in A$ such that,
\begin{enumerate}
\item $\d{(a_1 + a_2)} = \d{a_1} + \d{a_2}$
\item $\d{a_1 a_2} = \d{a_1} \cdot a_2 + a_1 \cdot \d{a_2}$
\item $\d{r} = 0$ for $r \in R$
\end{enumerate}
Then $\d_{R/A} : R \to \Omega_{R/A}$ is the universal derivation meaning that $\Omega_{R/A}$ represents the functor $\Der{R}{A}{-}$ i.e.
\[ \Hom{A}{\Omega_{A/R}}{M} \cong \Der{R}{A}{M} \]
via $(f : \Omega_{A/R} \to M) \mapsto f \circ \d_{A/R}$
\end{defn}

\begin{defn}
Given a morphism of ringed spaces $(X, \struct{X}) \to (Y, \struct{Y})$
then there is a universal derivation $\d_{X/Y} : \struct{X} \to \Omega_{X/Y}$ s.t.
\[ \Hom{\struct{X}}{\Omega_{X/Y}}{\F} \cong \Der{f^{-1} \struct{Y}}{\struct{X}}{\F} \]
Where a derivation $\varphi : \struct{X} \to \F$ is an abelian map such that $\varphi(fs) = f \varphi(s) + \varphi(f) s$ and under $f^{-1} \struct{Y} \to \struct{X}$ we send $s \in \struct{Y}(U)$ to $\varphi(s) = 0$.
\end{defn}

\begin{lemma}
For a morphism of schemes $f : X \to Y$ we have,
\begin{center}
\begin{tikzcd}
X \arrow[d, "f"] & U = \Spec{A} \arrow[l] \arrow[d]
\\
Y & V = \Spec{R} \arrow[l]
\end{tikzcd}
\end{center}
Then we have $\Omega_{X/Y} |_U = \wt{\Omega_{A/R}}$. 
\end{lemma}

\subsection{The Diagonal}
(Tag O1R1)
Consider $R \to A$ then consider the map,
\[ \Omega_{A/R} \xrightarrow{\sim} J / J^2 \]
via $\d{a} \mapsto a \otimes 1 - 1 \otimes a$ where $J = \ker{(A \otimes_R A \to A)}$ via $a \otimes b \mapsto ab$. This situation generalizes to Schemes in which,
\[ \Omega_{X/Y} = \Delta_{X/Y}^*(\J) \]
where $\J$ is the sheaf of ideals of $\Delta : X \to X \times_Y X$ i.e. $\J = \ker{(\struct{X \times_Y X} \to \Delta_{X/Y}^* \struct{X})}$. This is the conormal sheaf of $\Delta_{X/Y} : X \to X \times_Y X$. 

\section{Mar. 31}

\subsection{Conormal Sheaf}

\begin{defn}
Let $\iota : Z \embed X$ be a closed immersion with $\I = \ker{(\struct{X} \to \iota_* \struct{Z})}$. Then the conormal sheaf is $\C_{Z/X} = \iota^* \I$ and thus $\iota_* \C_{Z/X} = \I / \I^2$.
\end{defn}

\begin{rmk}
Affine locally $X = \Spec{A}$ and $Z = \Spec{A/I}$. Then we get the $A/I$-module $I \otimes_A A/I = I/I^2$ pushing forward to the $A$-module $I/I^2$.
\end{rmk}

\begin{prop}
Let $\iota : Z \embed X$ is a closed immersion over $S$ then there is an exact sequence,
\begin{center}
\begin{tikzcd}
\C_{Z/X} \arrow[r] & \iota^* \Omega_{X/S} \arrow[r] & \Omega_{Z/S} \arrow[r] & 0
\end{tikzcd}
\end{center}
If $Z \to S$ is smooth then it is short exact.
\end{prop}

\begin{proof}
This follows from the exact sequence, with $R \to A$ and $B = A/I$,
\begin{center}
\begin{tikzcd}
I / I^2 \arrow[r, "\alpha"] & \Omega_{A/R} \otimes_A B \arrow[r, "\beta"] & \Omega_{B/R} \arrow[r] & 0
\end{tikzcd}
\end{center}
given by $f \mapsto \d{f} \otimes 1$ and $\d{a} \otimes a \mapsto \d{\bar{a}}$. The second, $\beta$, is clearly surjective. Furthermore, given $B \to \Omega_{A/R} \otimes_A B / \Im{\alpha}$ via $\bar{a} \mapsto \d{a} \otimes 1$ is a well-defined $R$-derivation and thus factors through $\Omega_{B/R}$ giving the required isomorphism.
\end{proof}

\begin{prop}
Given 
\end{prop}

\begin{rmk}
The complex,
\[ I/I^2 \to \bigoplus^n_{i = 1} A \d{x_i} \]
for $A = R[x_1, \dots, x_n]/I$. This is a truncated version of $NL_{A/R}$, the naive cotangent complex of $A/R$ and $\coker{\d} = \Omega_{A/R}$ and $H^{-1}(NL_{A/R}) = H^{-1}(L_{A/R})$. 
\end{rmk}

\begin{rmk}
In the case $A = R[x_1, \dots, x_n]/I$, we get,
\begin{center}
\begin{tikzcd}
I/I^2 \arrow[r] & \Omega_{R[x_1, \dots, x_n]/R} \otimes A \arrow[r] & \Omega_{A/R} \arrow[r] & 0
\end{tikzcd}
\end{center}
and thus we see $\coker{\d} = \Omega_{A/R}$ as reuqired above.
\end{rmk}

\begin{defn}
Consider the presentation $R[A] \to A$ and $J = \ker{(R[A] \to A)}$. Then we can define the naive cotangent complex is $NL_{A/R} := (J/J^2 \xrightarrow{\d} \Omega_{R[A]/R} \otimes_{R[A]} A)$ with $J/J^2$ in degree $-1$.
\end{defn}

\begin{rmk}
The naive cotangent complex is homotopy equivalent to the complex above for a choice of presentation therefore we see the following.
\end{rmk}

\begin{prop}
A ring map $R \to A$ is smooth if the naive cotangent complex $NL_{A/R}$ is quasi-isomorphic to a projective module in degree zero. Explicitly $H^{-1}(NL_{A/R}) = 0$ and $H^0(NL_{A/R}) = \Omega_{A/R}$ is projective.
\end{prop}

\section{April 2}

\begin{theorem}
Let $f : X \to S$ be a morphism of schemes then the FAE,
\begin{enumerate}
\item $f$ is smooth
\item $f$ is locally finite presentation, flat, and the fibers $X_s \to \Spec{\kappa(s)}$ are smooth.
\item $f$ is locally finitely presentation and $f$ is formally smooth. 
\end{enumerate}
\end{theorem}

\begin{defn}
A morphism $f : X \to S$ is formally smooth iff every diagram of the form,
\begin{center}
\begin{tikzcd}
\Spec{A/I} \arrow[d] \arrow[r] & X \arrow[d, "f"]
\\
\Spec{A/I^2} \arrow[ru, dashed] \arrow[r] & S
\end{tikzcd}
\end{center}
gives a map $\Spec{A/I^2} \to X$ making it commute.
\end{defn}

\subsection{Smoothness over Fields}

Let $k$ be a field and $S = k[x_1, \dots, x_n]/(f_1, \dots, f_m)$ with $\q \subset S$ a prime ideal. Let $d = \dim{S_\q} + \trdeg{k}{\kappa(\q)}$.

\begin{prop}[Jacobian Criterion]
The following are equivalent,
\begin{enumerate}
\item $S$ is smooth over $k$ at $\q$ 
\item the rank over $\kappa(\q)$ of the matrix,
\[ \left( \pderiv{f}{x_i} \right)_{\substack{j = 1, \dots, m \\ i = 1, \dots , n}} \mod \p \]
is equal to $n - d$ (it is always at most $n - d$).
\end{enumerate}
\end{prop} 

\begin{rmk}
Smoothness at $\q$ implies that $S$ is regular at $\q$ but this is not sufficient.
\end{rmk}

\begin{rmk}
If $S$ is equidimensional of dimension $d$ then the nonsmooth locus of $\Spec{S}$ is the vanishing locus of all $(n-d) \times (n-d)$ minors of the matrix,
\[ \left( \pderiv{f}{x_i} \right)_{\substack{j = 1, \dots, m \\ i = 1, \dots , n}} \]
\end{rmk}

\begin{example}
Let $Z = V(F_1, \dots, F_c) \subset \P^n_k = X$ be a complete intersection of type $(d_1, \dots, d_c)$. We saw that,
\[ \omega_Z \cong \shExt{i}{\struct{X}}{\struct{Z}}{\omega_X} = \omega_X(d_1 + \cdots + d_c) |_Z \]
\end{example}

\begin{theorem}
If $Z \subset X = \P^n_k$ is a smooth projective scheme equidimensional of $\dim{Z} = n - c$ then,
\[ \omega_Z = \shExt{c}{\struct{X}}{\struct{Z}}{\omega_X} \cong \omega_X |_Z \otimes \bigwedge^c \C^\vee_{Z/X} \]
\end{theorem}

\begin{proof}
See HAR [III.7.11 + II.8.17]
The exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \C_{Z/X} \arrow[r] & \Omega_{X/k} |_Z \arrow[r] & \Omega_{Z/k} \arrow[r] & 0
\end{tikzcd}
\end{center}
implies that $\C_{Z/X}$ is a vector bundles of rank $c$. Then $Z$ is locally a complete intersection so we can conclude using our previous argument.
\end{proof}

\begin{lemma}
Consider an exact sequence of locally free sheaves,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \E_1 \arrow[r] & \E_2 \arrow[r] & \E_3 \arrow[r] & 0
\end{tikzcd}
\end{center}
then there is a canonical isomorphism of line bundles,
\[ \bigwedge^{\text{top}} \F_1 \otimes_{\struct{X}} \bigwedge^{\text{top}} \F_3 = \bigwedge^{\text{top}} \F_2 \]
\end{lemma}

\begin{prop}
For $X = \P^n_k$ we know,
\[ \omega_X \cong \struct{X}(-n-1) \cong \bigwedge^n \Omega_{X/k} \]
\end{prop}

\begin{proof}
There is a short exact sequence of locally free sheaves,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \Omega_{X/k} \arrow[r] & \bigoplus\limits_{i = 0}^n \struct{X}(-1) \d{T_i} \arrow[r] & \struct{X} \arrow[r] & 0
\end{tikzcd}
\end{center}
on $D_+(T_i)$ given by,
\[ \d{ \left( \frac{T_i}{T_j} \right) } = \frac{\d{T_i}}{T_j} - \frac{T_i \d{T_j}}{T_j^2} \]
and,
\[ \frac{\d{T_i}}{T_j} \mapsto \frac{T_i}{T_j} \]
Then, taking top exterior powers gives.
\[ \bigwedge^{n+1} \left( \bigoplus_{i = 0}^n \struct{X}(-1) \right) = \struct{X}(-n - 1) \]
\end{proof}

\begin{lemma}[Adjunction]
Let $Z \subset X$ be a smooth closed subscheme. Then,
\[ \bigwedge^{\dim{Z}} \Omega_{Z/k} \cong \bigwedge^{\dim{X}} \Omega_{X/k} |_Z \otimes \bigwedge^c \C^\vee_{Z/X} \]
\end{lemma}

\begin{proof}
This is exactly the top exterior power of the sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \C_{Z/X} \arrow[r] & \Omega_{X/k} |_Z \arrow[r] & \Omega_{Z/k} \arrow[r] & 0
\end{tikzcd}
\end{center}
\end{proof}

\begin{rmk}
This implies that $K_Z = K_X |_Z + c_1(N_{Z/X})$. 
\end{rmk}

\begin{theorem}
Let $Z$ be a smooth projective variety over $k$. Then $\omega_Z \cong \bigwedge^{\dim{Z}} \Omega_{Z/k}$.
\end{theorem}

\begin{proof}
Choose an embedding $Z \embed \P^n_k$ then we use adjunction for dualizing sheaves and for canonical sheaves which are the same to conclude. 
\end{proof}

\section{Varieties}

\begin{defn}
A \textit{variety} is an integral separated scheme with $X \to \Spec{k}$ finite type. 
\end{defn}

\begin{rmk}
Problems: products of varieties are not varieties. E.g. $k = \Q$ and $X = \Spec{\Q(i)}$ then $X \times_\Q X = \Spec{\Q(i) \otimes_\Q \Q(i)}$ is not integral.
\bigskip\\
The problem is that varieties are not geometrically integral.
\end{rmk}

\begin{defn}
A scheme $X$ over $k$ is geometrically integral if $X_{\bar{k}} = X \times_k \bar{k}$ is integral.
\end{defn}

\begin{rmk}
There are not ``enough'' rational points of a general variety. For example, given,
\[ X = V(x^2 + y^2 + z^2) \subset \P^3_\Q \]
then $X(\Q) = \varnothing$. We say $X(k) = \Hom{k}{\Spec{k}}{X}$ is the set of $k$-rational points.
\end{rmk}

\begin{rmk}
Alternative definition: we require that varieties are geometrically integral. Then products of varieties are varieties. 
\end{rmk}

\begin{defn}
A \textit{curve} is a variety of dimension one.
\end{defn}

\begin{lemma}
A curve is regular iff it is normal.
\end{lemma}

\begin{proof}
A Noetherian local ring of dimension one is regular iff it is normal iff it is a DVR.
\end{proof}

\begin{lemma}
A curve is either affine or projective. 
\end{lemma}

\subsection{Rational Maps}

\begin{defn}
Let $X, Y$ be varieties over $k$. A rational map $f : X \rat Y$ is an equivalence class of pairs $(U, f)$ with $U \subset X$ is a dense open and $f : U \to Y$ is a morphism on $U$ such that $(U, f_U) \sim (V, f_V)$ iff there is $W \subset U \cap V$ with $f_U |_W = f_V |_W$. Since $X, Y$ are reduced and separated this implies that $f_U |_{U \cap V} = f_V |_{U \cap V}$.
\end{defn}

\begin{rmk}
Rational maps cannot be composed e.g. const map to a point then projection away from that point is undefined. To fix this we ask that the rational maps be dominant.
\end{rmk}

\begin{defn}
A rational map $f : X \rat Y$ is dominant if for any representative $(f, U)$ then $f(U) \subset Y$ is dense.
\end{defn}

\begin{theorem}
The category varieties over $k$ with rational maps is anti-equivalent to the category of finitely generated extensions of $k$. Sending $(f : X \rat Y) \mapsto f_\eta : K(Y) \to K(X)$. 
\end{theorem}

\begin{defn}
The function field $K(X)$ of an integral scheme  is $\stalk{X}{\xi}$ where $\xi \in X$ is the generic point. For any affine open $\Spec{A} \subset X$ then $A$ is a domain and $(0) \subset A$ is the generic point of $\Spec{A}$ and also of $X$. Then, $\stalk{X}{\xi} = \Frac{A}$. If $X$ is finite type over $k$ then $A$ is a finitely-generated $k$-algebra so $K(X) = \Frac{A}$ is a finitely-generated field extension of $k$.
\end{defn}

\begin{lemma}
Let $X, Y$ be varieties over $k$. Any $k$-map $\varphi : K(Y) \to K(X)$ induces a rational map $X \rat Y$ acting by $\varphi$ on the generic points.
\end{lemma}

\begin{proof}
Let $U = \Spec{A} \subset X$ be an open and $V = \Spec{B} \subset Y$ an open. Then $B = k[b_1, \dots, b_n]$ we can wrtie $\varphi(b_i) = \frac{a_i}{a'_i}$ for $a_i, a_i' \in A$ with $a_i' \neq 0$. Then replace $U$ by $D(a_1', \dots, a_n') \subset \Spec{A} \subset X$. Then we get,
\begin{center}
\begin{tikzcd}
K(X) & K(Y) \arrow[l, "\varphi"]
\\
A' \arrow[u, hook] & B \arrow[l] \arrow[u, hook]
\end{tikzcd}
\end{center}
This is dominant since $\phi^{-1}(0) = (0)$ because $\phi$ is injective. 
\end{proof}

\begin{defn}
Varieties $X, Y$ over $k$ are \textit{birational} iff they are isomorphic in the rational category iff $K(X) = K(Y)$ as $k$-extensions.
\end{defn}

\section{Curves}

\begin{theorem}
There is an anti-equivalence of categories between the category of normal projective curves over $k$ and the category of trancendence degree one field extensions of $k$.
\end{theorem}

\begin{prop}
The functor $C \mapsto K(C)$ is essentially surjective. 
\end{prop}

\begin{proof}
Given a transendence degree one field $K / k$ we know $K = k(X)$ for some affine $X \subset \A^n_k$ then take the closure $\overline{X} \subset \P^n_k$. Since $X \subset \overline{X}$ is a dense open then $K(\overline{X}) = K(X) = K$. Then we normalize to get $\overline{X}^\nu \to \overline{X}$ which is birational so get get $K(\overline{X}^\nu) = K(X)$. 
\end{proof}

\begin{lemma}
Let $X \rat Y$ be a rational map from a normal curve to a projective variety. Then it extends to $X \to Y$. 
\end{lemma}

\begin{proof}
We have $X \rat Y \subset \P^n_k$ since $Y$ is closed it is enough to extend $X \to \P^n_k$. After replacing $\P^n_k$ by a smaller projective space we may assume the map is $[f_0 : \dots : f_n]$ for not all zero $f_i \in k(X)$. For a closed point $x \in X$ the ring $\stalk{X}{x}$ is a DVR with uniformizer $\varpi$ since $X$ is a normal curve. Then $K(X) = \Frac{\stalk{X}{x}}$ so we can write $f_i = u_i \varpi^{n_i}$ for $u_i \in \stalk{X}{x}^\times$ and $n_i \in \Z$. Let $N = \min{n_i}$. Now,
\[ [f_0 : \dots : f_n] = [ \varpi^{N} f_0 : \dots : \varpi^{N} f_n] \]
so take $g_i = \varpi^N f_i \in \stalk{X}{x}$ and there is some $g_i \in \stalk{X}{x}^\times$ so there exists $U \subset X$ open such that $g_i \in \struct{X}(U)$ and $g_j \in \struct{X}(U)^\times$. Therefore, can extend,
\[ [g_0 : \dots : g_n] : U \to D_+(T_i) \subset \P^n_k \]

\end{proof}

\begin{prop}
The functor $C \mapsto K(C)$ is fully faithful.
\end{prop}

\begin{proof}

\end{proof}

\begin{prop}
If $Y$ is projective then its normalization $Y^\nu$ is projective. 
\end{prop}

\end{document}



