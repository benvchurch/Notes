\documentclass[12pt]{article}
\usepackage{import}
\import{./}{AlgGeoCommands}

\begin{document}

\begin{remark}
Unless otherwise stated, all rings are commutative and unital.
\end{remark}

\section{Definitions}

\begin{definition}
An element $p \in A$ is prime if $(p)$ is a prime ideal. Equivalently $p$ is prime if whenever $p \divides xy$ either $p \divides x$ or $p \divides y$.
\end{definition}

\begin{definition}
An element $r \in A$ which is nonzero and not a unit is irreducible if whenever $r = xy$ either $x \in A^\times$ or $y \in A^\times$. 
\end{definition}

\section{Domains}

\begin{definition}
A ring $A$ is a domain if $A$ has no zero divisors i.e. if $ab = 0$ then $a = 0$ or $b = 0$.
\end{definition}

\begin{proposition}
Let $A$ be a domain then any nonzero prime element is irreducible. 
\end{proposition}

\begin{proof}
Let $p \in A$ be a prime. Now suppose that $p = xy$ for $x,y \in A$. Thus, $p \divides xy$ so (WLOG) we have $p \divides x$ so $x = pz$ and thus $p = pzy$. However, $p$ is nonzero and $A$ is a domain so $zy = 1$ and thus $y \in A^\times$ proving that $p$ is irreducible. 
\end{proof}

\section{Principal Ideal Domains}

\begin{definition}
A principal ideal domain (PID) is a domain $A$ such that every ideal is principal. 
\end{definition}

\begin{lemma}
If $A$ is a PID then $A$ is Noetherian.
\end{lemma}

\begin{proof}
Every ideal is principal and thus finitely generated.
\end{proof}

\begin{lemma}
Let $A$ be a PID and $r \in A$ irreducible then $(r)$ is maximal and thus $r$ is prime. 
\end{lemma}

\begin{proof}
Consider an intermediate ideal $(r) \subset J \subset A$ then since $A$ is a PID we have $J = (a)$ so $r \in (a)$ and thus $r = ac$ so either $a \in A^\times$ in which case $J = A$ or $c \in A^\times$ in which case $J = (r)$ so $(r)$ is maximal and thus a prime ideal.
\end{proof}

\begin{theorem}
Let $A$ be a PID and not a field then $\dim{A} = 1$.
\end{theorem}

\begin{proof}
Any prime ideal $\p \subset A$ is principal so $\p = (p)$ and $p$ is prime. Either $p = 0$ which is prime since $A$ is a domain or $p$ is irreducible and so we have shown $(p)$ is maximal. So every prime ideal is zero or maximal and thus $\dim{A} \le 1$. If $\dim{A} = 0$ then $(0)$ is maximal so $A$ is local and any nonzero element is thus invertible so $A$ is a field. 
\end{proof}

\begin{theorem}[Kaplansky]
Let $A$ be Noetherian then $A$ is a principal ideal ring iff every maximal ideal is prime.
\end{theorem}

\begin{theorem}[Cohen]
A ring $A$ is Noetherian iff every prime ideal is finitely generated.
\end{theorem}

\begin{corollary}
A ring $A$ is a principal ideal ring iff every prime ideal is principal. 
\end{corollary}

\section{Unique Factorization Domains}

\begin{definition}
A domain $A$ is a unique factorization domain (UFD) if every nonzero element has a unique factorization into irreducible elements. 
\end{definition}

\begin{definition}
A factorization ring $A$ is a ring such that every nonzero element has a factorization into irreducible elements.
\end{definition}

\begin{lemma}
If $A$ is a Noetherian domain then it is a factorization domain.
\end{lemma}

\begin{proof}
Take $a_0 \in A$. If $a$ is irreducible, zero, or a unit then we are done. Then we can write, $a = a^{(1)}_1 a^{(1)}_2$ for $a_1, b_1 \notin A^\times$. Continuing in this manner we get,
\[ (a) \subsetneq (a^{(1)}_1, a^{(1)}_2) \subsetneq (a^{(2)}_1, a^{(2)}_2, a^{(2)}_3, a^{(3)}_4) \subsetneq \cdots \]
(CHECK THIS)
This sequence is proper since if $a = bc$ and $b \in (a)$ then $a = arc$ so $rc = 1$ and thus $c \in A^\times$ contradicting our construction. However, $A$ is Noetherian then the sequence must terminate so at some point the factorization must become irreducible. 
\end{proof}

\begin{theorem}
Let $A$ be a factorization domain. Then $A$ is a UFD iff every irreducible is prime. 
\end{theorem}

\begin{proof}
If $A$ is a UFD and $p$ an irreducible. Let $x, y \in A$ and $p \divides xy$ then $p$ is in the factorization of $xy$ and thus, by uniqueness must be in the factorization of either $x$ or $y$ so $p \divides x$ or $p \divides y$.
\bigskip\\
Conversely, if $A$ is a factorization domain and every irreducible is prime then given two factorizations of $x$ each irreducible must, by primality, divide an irreducible in the other factorization so they are equal. 
(DO THIS BETTER)
\end{proof}

\begin{corollary}
If $A$ is a PID then $A$ is a UFD.
\end{corollary}

\begin{proof}
If $A$ is a PID then it is Noetherian and thus a factorization domain. Furthermore, every irreducible is prime so $A$ is a UFD.
\end{proof}

\subsection{Height One Prime Ideals}

\begin{proposition}
Let $A$ be Noetherian. Then any principal prime ideal has height at most one.
\end{proposition}

\begin{proof}
Let $\p = (p) \subset A$ be a principal prime ideal. Then consider the localization which is $A_{(p)}$ Noetherian and the unique maximal ideal $p A_{(p)}$ is principal. Take $N = \nilrad{A_{(p)}}$ then,
\[ \dim{A_{(p)}/N} = \dim{A_{(p)}} = \height{\p} \]
but $A_{(p)} / N$ is a Noetherian domain and the unique maximal ideal $p A_{(p)}$ is principal so $A_{(p)} / N$ is a PID and thus $\dim{A_{(p)} / N} \le 1$. 
\end{proof}

\begin{proposition}
If $A$ is a UFD then every prime ideal of height one is principal.
\end{proposition}

\begin{proof}
Let $\p \subset A$ be a prime ideal with $\height{\p} = 1$. Take any nonzero element $x \in \p$ and consider its factorization into irreducibles. Since $\p$ is prime some irreducible factor $p \divides x$ must be in $\p$ so $(p) \subset \p$. Since $A$ is a UFD all irreducibles are prime so $(p) \subset \p$ is prime. However $\height{\p} = 1$ and $(p) \neq (0)$ so $(p) = \p$ and thus $\p$ is principal.
\end{proof}

\begin{theorem}
Let $A$ be a Noetherian domain. Then $A$ is a UFD iff every height one prime ideal is principal. 
\end{theorem}

\begin{proof}
We showed one direction above. Conversely, suppose every height one prime ideal is principal. Since $A$ is a Noetherian domain, it suffices to show that each irreducible is prime. Let $r$ be irreducible and consider a minimal prime $\p \supset (r)$. Then by Krull's Hauptidealsatz, $\p$ has height one so by our assumption $\p = (p)$ is principal. However, $(r) \subset (p)$ so $p \divides r$ but $r$ is irreducible so we must have $(r) = (p) = \p$ and thus $r$ is prime.
\end{proof}

\begin{theorem}[Krull's Hauptidealsatz]
Let $I \subset A$ be an ideal in a Noetherian ring $A$ with $n$ generators then any minimal prime ideal $\p \supset I$ has height at most $n$.
\end{theorem}

\section{Simple Modules}

\begin{defn}
A nonzero $R$-module is \textit{simple} if it has no nontrivial submodules.
\end{defn}

\begin{prop}
Let $R$ be a ring and $M$ an $R$-module. Then the following are equivalent,
\begin{enumerate}
\item $M$ is simple
\item $\ell_R(M) = 1$
\item $M = R / \m$ for some maximal ideal $\m \subset R$.
\end{enumerate}
\end{prop}

\begin{proof}
The first two are equivalent by definition. Clearly if $\m \subset R$ is maximal then $R / \m$ is simple. Now suppose that $M$ is simple and take a nonzero $x \in M$. Then $(x) = M$ by simplicity so consider $I = \ker{(R \xrightarrow{x} M)} = \Ann{A}{x} = \{r \in R \mid r x = 0\}$. Since $M = R x$ we know that $M \cong R / I$. However, by the lattice isomorphism theorem, submodules of $R / I$ correspond to ideals above $I$ so since $M$ is simple we must have $I$ maximal.  
\end{proof}

\section{Artinian Modules}

\begin{defn}
An $R$-module $M$ is \textit{noetherian/artinian} if it satisfies the ascending/descending chain condition on submodules.
\end{defn}

\begin{theorem}
An $R$-module $M$ has finite length iff it is both noetherian and artinian.
\end{theorem}

\begin{proof}
If $M$ has finite length then clearly it is noetherian and artinian since chains of submodules are bounded in length. Alternatively, simple modules are noetherian and artinian  so given a composition series we see that $M$ is noetherian and artinian by repeated extension. Now, conversely, assume that $M$ is noetherian and artinian. By the artinian property we can take a minimal nonzero submodule $M_1 \subset M$. Then $M_1$ is simple. Either $M / M_1$ is simple or we may repeat to get $M_2 \supset M_1$ and $M_2 / M_1$ is simple. Thus we get an ascending chain $0 = M_0 \subset M_1 \subset M_2 \subset M_3 \subset  \cdots$ with $M_{i+1}/M_i$ simple. Since $M$ is Noetherian, this must terminate at $M_n = M$ so we get a finite length composition series showing that $M$ has finite length.
\end{proof}

\section{Artinian Rings}

\begin{defn}
A ring $A$ is \textit{artinian} if it satisfies the descending chain condition on ideals: given a chain of ideals,
\[ I_0 \supset I_1 \supset I_2 \supset \cdots \]
the chain stabilizes $I_{n+i} = I_n$. 
\end{defn}

\begin{rmk}
$A$ is artinian iff it is artinian as a module over itself.
\end{rmk}

\begin{prop}
An artinian ring has finitely many maximal ideals.
\end{prop}

\begin{proof}
Let $\m_1, \m_2, \m_3, \dots$ be a list of maximal ideals. Then consider the chain,
\[ \m_1 \supset \m_1 \m_2 \supset \m_1 \m_2 \m_3 \supset \cdots \]
By the artinian condition, we must have $\m_1 \cdots \m_n = \m_1 \cdots \m_n \m_{n+1}$ for some $n$. But then by prime avoidence $\m_{n+1}$ must be one of $\m_1, \dots, \m_n$ since $\m_{n+1} \supset \m_1 \cdots \m_n$ so $\m_{n+1} \supset \m_i$ and $\m_i$ is maximal.
\end{proof}



\begin{prop}
Let $A$ be an artinian ring. Then every prime ideal is maximal so $\dim{A} = 0$.
\end{prop}

\begin{proof}
Let $\p$ be prime and $x \notin \p$. Consider the chain,
\[ (x) \supset (x^2) \supset (x^3) \supset \cdots \]
By the artinian condition $(x^n) = (x^{n+1})$ for some $n$ so $x^n = r x^{n+1}$ for some $r \in A$. Thus,
\[ x^n(rx - 1) = 0 \] 
However, $x^n \notin \p$ so $rx - 1 \in \p$ and thus $x \in A / \p$ is invertible so $A / \p$ is a field and thus $\p$ is maximal.
\end{proof}

\begin{prop}
Let $A$ be artinian. Then $\nilrad{A}$ is a nilpotent ideal.
\end{prop}

\begin{proof}
Let $I = \nilrad{A}$. Consider the chain of ideals,
\[ I \supset I^2 \supset I^3 \supset \cdots \]
By the artinian condition, $I^{n+1} = I^n$ for some $n$. Consider $J = \{ x \in A \mid x I^n = 0 \}$. If $J \neq R$ we can choose $J' \supsetneq J$ minimal (using the artinian property). Then take $y \in J'$ so by minimality $J' = J + (y)$. Suppose $J + I(y) = J'$ then, since $J \subset \Jac{A}$ and $(y)$ is finitely generated, by Nakayama, $J' = J + I(y) = J$ which is false so $J \subset J + I(y) \subsetneq J'$ and thus $J = J + I(y)$ by minimality so $I(y) \in J$. Therefore, $y \cdot I^{n+1} = 0$ but $I^{n+1} = I^n$ so $y \cdot I^n = 0$ and thus $y \in J$ contradicting our situation so $J = R$ and thus $I^n = 0$.
\end{proof}

\begin{prop}
Every artinian ring is a product of local artinian rings: $A_{\m_i} = A / \m_i^n$.
\end{prop}

\begin{proof}
Let $\m_1, \dots, \m_r$ be the maximal ideals. Then we know that $\m_1^{n_1} \cdots \m_r^{n_r} = 0$ for some integers $n_1, \dots, n_r \in \Z$. Therefore, by the Chinese remainder theorem,
\[ A = A / (\m_1^{n_1} \cdots \m_r^{n_r}) = \prod_{i = 1}^r A / \m_i^{n_i} \]
Furthermore, $A / \m_i^{n_i}$ is local because $\m_i$ is the only maximal ideal above $\m_i^{n_i}$. Furthermore, 
\[ A_{\m_i} = (A / \m_i^{n_i})_{\m_i} = A / \m_i^{n_i} \]
since $A \setminus \m_i$ is not contained in any maximal ideal of $A / \m_i^{n_i}$ and thus is invertible.   
\end{proof}

\begin{prop}
A ring $A$ is artinian iff it has finite length as a module over itself.
\end{prop}

\begin{proof}
If $A$ has finite length as an $A$-module then it satisfies both the ascending and descending chain conditions on $A$-submodules i.e. ideals thus $A$ is both noetherian and artinian. Conversely, let $A$ be artinian. Since $A$ is a finite product of local artinian rings we may reduce to the case that $A$ is local artinian with maximal ideal $\m$. Since $\nilrad{A} = \m$ then $\m^n = 0$ for some $n$ so we get a series,
\[ 0 = \m^n \subset \m^{n-1} \subset \cdots \subset \m \subset A \]
Then $\m^i / \m^{i+1}$ is a $A / \m$-module and,
\[ \ell_A(\m^i / \m^{i+1}) = \ell_{A/\m}(\m^i / \m^{i+1}) = \dim_{A/\m} \m^i / \m^{i+1} \]
which must be finite since $\m^i / \m^{i+1}$ is an artinian module and thus must have finite dimension else there would be a nonterminating descending chains. Thus from the series $A$ has finite length. 
\end{proof}

\begin{theorem}
A ring $A$ is artinian iff $A$ is noetherian and $\dim{A} = 0$.
\end{theorem}

\begin{proof}
If $A$ is artinian then it has finite length over itself and thus is noetherian. Also every prime is maximal so $\dim{A} = 0$. Conversely, suppose that $A$ is noetherian and $\dim{A} = 0$. Then $\Spec{A}$ is a noetherian topological space which has finitely many irreducible componets so $A$ has finitely many minimal primes which are also maximal since $\dim{A} = 0$. Thus $A$ has finitely many primes all of which are maximal. Since $\dim{A} = 0$ we have $I = \Jac{A} = \nilrad{A}$ so any $f \in I$ is nilpotent so $I$ is nilpotent because $A$ is noetherian so $I$ is finitely generated. Thus by the Chines remainder theorem $A$ is a finite product of local rings so we reduce to the case that $A$ is local with maximal ideal $\m$. Then we get a series,
\[ 0 = \m^n \subset \m^{n-1} \subset \cdots \subset \m \subset A \]
but $\m^i / \m^{i+1}$ is a finite $A / \m$-module since $A$ is noetherian so,
\[ \ell_A(\m^i / \m^{i+1}) = \ell_{A/\m}(\m^i / \m^{i+1}) = \dim_{A/\m} \m^i / \m^{i+1} \]
is finite and thus $\ell_A(A)$ is finite from the series showing that $A$ is artinian.
\end{proof}


\begin{prop}
Let $A$ be an artinian ring. Then,
\[ \ell_A(A) = \sum_{i = 1}^r \ell_{A_{\m_i}}(A_{\m_i}) \]
\end{prop}

\begin{proof}
We can write, $A = A_{\m_1} \times \cdots \times A_{\m_r}$ and thus the formula immediately follows.
\end{proof}


\begin{prop}
Any finite dimensional $k$-algebra is artinian.
\end{prop}

\begin{proof}
By dimensionality arguments every descending chain stabilizes. 
\end{proof}

\begin{prop}
Let $A \to B$ be a local map and $M$ an $B$-module of finite length. Then,
\[ \ell_A(M) = \ell_B(M) \cdot [ \kappa(\m_B) : \kappa(\m_A) ] \]
and in particular $\ell_A(M)$ is finite if $\kappa(\m_B)$ is a finite extension of $\kappa(\m_A)$.
\end{prop}

\begin{proof}
Consider a composition series,
\[ 0 = M_0 \subset M_{1} \subset \cdots \subset M_n = M \]
Then $M_i / M_{i - 1}$ is a simple $B$-module so $M_i / M_{i-1} \cong B / \m_B = \kappa(\m_B)$ since $B$ is local. Therefore,
\[ \ell_A(M) = \sum_{i = 1}^n \ell_A (M_i / M_{i-1}) = \sum_{i = 1}^n \ell_A(\kappa(\m_B)) = n \cdot [ \kappa(B_\m) : \kappa(A_\m) ] \]
where $\ell_A(\kappa(\m_B)) = \ell_{\kappa(\m_A)}(\kappa(\m_B))$ because $A \to B$ is local and,
\[ \ell_{\kappa(\m_A)}(\kappa(\m_B)) = \dim_{\kappa(\m_A)}(\kappa(\m_B)) = [\kappa(\m_B) : \kappa(\m_A)] \]
\end{proof}

\begin{cor}
If $A$ is a local artinian finite type $k$-algebra. Then,
\[ \dim_k{A} = \ell_A(A) \cdot \dim_k{(A / \m)} \]
in particular $A$ is a finite $k$-module. 
\end{cor}

\begin{proof}
Viewing $A$ as a module over itself we know it has finite length since $A$ is artinian. Furthermore, $A / \m$ is a field finitely generated over $k$ and thus a finite extension of $k$ by the Nullstellensatz. Then applying the previous result we conclude. 
\end{proof}

\begin{cor}
Let $A$ be an artinian finite type $k$-algebra. Then,
\[ \dim_k{A} = \sum_{i = 1}^r \ell_{A_{\m_i}}(A_{\m_i}) \cdot \dim_k{(A / \m_i)} \]
\end{cor}

\begin{proof}
Since $A$ is artinian we can write,
\[ A = \prod_{i = 1}^r A_{\m_i} \]
where $A_{\m_i}$ are the local artinian factors associated to the finitely many prime ideals $\m_1, \dots, \m_r$. The result follows from above by additivity of the dimensions.
\end{proof}

\begin{rmk}
We can generalize this to the following proposition.
\end{rmk}

\begin{prop}
Let $A$ be local with maximal ideal $\m$ and $B$ be semi-local with maximal ideals $\m_i$. Let $A \to B$ be a homomorphism of rings such that $\m_i$ lie over $\m$ and $[\kappa(\m_i) : \kappa(\m)]$ is finite. Let $M$ be a finite length $B$-module. Then,
\[ \ell_A(M) = \sum_{i = 1}^n \ell_{B_{\m_i}}(M_{\m_i}) \cdot [\kappa(\m_i) : \kappa(\m)] \]
\end{prop}

\section{Weakly Associated Points}

\newcommand{\WAss}[2]{\mathrm{WAss}_{#1}\left(#2 \right)}

\subsection{Weakly Associated Primes}

\begin{defn}
Let $A$ be a ring and $M$ an $A$-module. Then a prime $\p \subset A$ is \textit{weakly associated} to $M$ if $\p$ is minimal over $\Ann{A}{m}$ for some $m \in M$. We denote these primes $\WAss{A}{M}$.
\end{defn}

\begin{lemma}
Let $M$ be an $A$ module then the natural map,
\[ M \to \prod_{\p \in \WAss{A}{M}} M_\p \]
is injective.
\end{lemma}

\begin{proof}
Suppose that $m \in M$ maps to zero. Then $\p \not\subset \Ann{A}{m}$ for each $\p \in \WAss{A}{M}$ which implies $\Ann{A}{m} = A$ since otherwise some associated prime will be minimal over $\Ann{A}{m}$. Thus $m = 0$.
\end{proof}

\begin{lemma}
Let $M$ be an $A$-module. Then,
\[ M = (0) \iff \WAss{A}{M} = \empty \]
\end{lemma}

\begin{proof}
If $M = (0)$ then this is clear. Otherwise, by the previous lemma $M \embed (0)$ is injective so $M = (0)$. 
\end{proof}

\begin{lemma} \label{weak_ass_primes_localization}
Let $A$ be a ring and $M$ an $A$-module. Then,
\[ \p \in \WAss{A}{M} \iff \p A_\p \in \WAss{A_\p}{M_\p} \]
\end{lemma}

\begin{proof}
Consider the exact sequence for each $m \in M$,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \Ann{A}{m} \arrow[r] & A \arrow[r, "m"] & M 
\end{tikzcd}
\end{center}
Since localization is exact, we get an exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & (\Ann{A}{m})_\p \arrow[r] & A_\p \arrow[r, "m"] & M_\p
\end{tikzcd}
\end{center}
Therefore, $\Ann{A_\p}{m} = (\Ann{A}{m})_\p$. If $\p \supset \Ann{A}{m}$ is minimal then $\p A_\p \subset (\Ann{A}{m})_\p = \Ann{A_\p}{m}$ is minimal. Conversely, if $\p A_\p \supset \Ann{A_\p}{m/s}$ is minimal then,
\[ \Ann{A_\p}{m/s} = \Ann{A_\p}{m} = (\Ann{A}{m})_\p \]
which implies that $\p \supset \Ann{A}{m}$ is minimal because if $x \in \Ann{A}{m}$ and $x \notin \p$ then $(\Ann{A}{m})_\p = A_\p$ and any prime $\q$ such that $\p \subset \q \subset \Ann{A}{m}$ implies that $\q A_\p$ is intermediate.
\end{proof}

\begin{lemma} \label{minimal_supp_wass}
Let $A$ be a ring and $M$ an $A$-module. Then $\WAss{A}{M} \subset \Supp{A}{M}$ furthermore any minimal element of $\Supp{A}{M}$ is an element of $\WAss{A}{M}$.
\end{lemma}

\begin{proof}
Since $\p \supset \Ann{A}{m}$ we know $M_\p \neq 0$ since $m$ is nonzero in $M_\p$. Furthermore, suppose that $\p \in \Supp{A}{M}$ is minimal. Then $\Supp{A_\p}{M_\p} = \{ \p A_\p \}$ and $M_\p \neq 0$ so $\WAss{A_\p}{M_\p} = \{ A_\p \}$ and thus $\p \in \WAss{A}{M}$.
\end{proof}


\begin{lemma} \label{ass_primes_localization}
Let $A$ be a ring and $M$ an $A$-module and $S \subset A$ a multiplicative subset. Then.
\begin{enumerate}
\item $\WAss{A}{S^{-1} M} = \WAss{S^{-1} A}{S^{-1} M}$ 
\item $\WAss{A}{M} \cap \Spec{S^{-1} A} = \WAss{A}{S^{-1} M}$.
\end{enumerate}
\end{lemma}

\begin{proof}
We have,
\[ \p \in \WAss{A}{S^{-1} M} \iff \p A_\p \in \WAss{A_\p}{S^{-1} M_\p}  \]
For $\p \in \Spec{S^{-1} A}$ (i.e. $S \subset A \setminus \p$) we have $S^{-1} M_\p = M_\p$ and $(S^{-1} A)_\p = A_\p$ so both equalities hold. Otherwise, $\p A_\p$ containes an element of $S$ so $\p A_\p$ has some nonzero divisor on $S^{-1} M_\p$ and thus $\p \notin \WAss{A}{S^{-1} M}$. 
\end{proof}


\begin{proposition}
Let $A$ be a ring $M$ an $A$-module then $\p \in \Supp{A}{M}$ if and only if there exists $\q \subset \p$ with $\q \in \WAss{A}{M}$. Therefore, \[ \bigcap_{\p \in \Supp{A}{M}} \p = \bigcap_{\p \in \WAss{A}{M}} \p \]
\end{proposition}

\begin{proof}
Take $\p \in \Supp{A}{M}$ so $M_\p \neq 0$ and then $\Ass{A}{M_\p} \neq \varnothing$. Using the previous lemma, there exists $\q \in \Ass{A}{M_\p} = \Ass{A}{M} \cap \{ \q \mid \q \subset \p \}$. Furthermore, the support is an upward set (if $\q \subset \p$ and $M_\q \neq 0$ then $M_\p \neq 0$ since $M_\p \to M_\q$ is localization). Thus, if we have $\q \subset \p$ with $\q \in \Ass{A}{M} \subset \Supp{A}{M}$ then $\p \in \Supp{A}{M}$.  
\end{proof}


\begin{lemma}
Let $M \embed N$ be an injection of $A$-modules. Then $\WAss{A}{M} \subset \WAss{A}{N}$.
\end{lemma}

\begin{proof}
This follows because the set of annihilators of elements of $M$ is a subset of the set of annihilators of elements of $N$.
\end{proof}

\begin{lemma} \label{exact_seq_weak_ass}
Consider an exact sequence of $A$-modules,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & M_1 \arrow[r] & M_2 \arrow[r] & M_3 
\end{tikzcd}
\end{center}
then,
\[ \WAss{A}{M_2} \subset \WAss{A}{M_1} \cup \WAss{A}{M_3} \]
\end{lemma}

\begin{proof}
Let $\p \in \WAss{A}{M_2}$ and $\p \notin \WAss{A}{M_1}$. Using the previous lemma it suffices to consider the case that $A$ is local with maximal ideal $\p$ (since we may localize the exact sequnence at $\p$). 
Then $\p$ is minimal over $\Ann{A}{m}$ for some $m \in M_2$ not in the image of $M_1 \to M_2$ (else $\p \in \WAss{A}{M_1}$). Therefore $\bar{m} \in M_3$ is nonzero and $\Ann{A}{\bar{m}} \supset \Ann{A}{m}$ but $\Ann{A}{\bar{m}}$ is proper since $\bar{m}$ is nonzero and thus contained in $\p$. Since $\p$ is minimal over $\Ann{A}{m}$ it must also be minimal over $\Ann{A}{\bar{m}}$ and thus we conclude that $\p \in \WAss{A}{M_3}$.
\end{proof}

\begin{lemma}
Let $A$ be a ring and $M$ and $A$-module. Then,
\[ \bigcup_{\p \in \WAss{A}{M}} = \{ \text{zero divisors on } M \} \]
\end{lemma}

\begin{proof}
Let $m \in M$ have zero divisors then there is exists a minimal prime (by Zorn's Lemma) above $\Ann{A}{m}$ which must be associated. Conversely, if $f \in \p \in \WAss{A}{M}$ then $\p$ is minimal over $\Ann{A}{m}$ for some $m \in M$. Then $R = (A / \Ann{A}{m})_\p$ has a unique minimal prime $\p$ so $\p = \nilrad{R}$ and thus $g f^n \in \Ann{A}{m}$ for some least $n > 0$ and $g \notin \p$. Thus $g f^n m = 0$ so $f (g f^{n-1} m) = 0$ but $g f^{n-1} m \neq 0$ because $n$ is minimal so $f$ is a zero divisor.
\end{proof}

\begin{prop}
Let $(A, \m)$ be a local ring then $\m \in \WAss{A}{A}$ iff $\m = \{ \text{zero divisors} \}$.
\end{prop}

\begin{proof}
Immediate from the above since zero divisors are not units and thus contained in $\m$.
\end{proof}

\begin{cor}
Given a prime $\p \in \Spec{A}$ and an $A$-module $M$ we have,
\[ \p \in \WAss{A}{A} \iff \p A_\p = \{ \text{zero divisors of } A_\p \} \]
\end{cor}

\begin{prop}
Let $A$ be reduced then $\WAss{A}{A}$ are exactly the minimal primes of $A$.
\end{prop}

\begin{proof}
The minimal primes are in $\WAss{A}{A}$ by Lemma \ref{minimal_supp_wass}. Because $\p \in \WAss{A}{A} \iff \p A_\p \in \WAss{A_\p}{A_\p}$ is suffices to consider the case of a reduced local ring $(R, \m)$ and $\m \in \WAss{R}{R}$. Then $\m$ is minimal over $\Ann{R}{x}$ for some $x \in \m$ so $\m = \sqrt{\Ann{R}{x}}$. Thus $x^n \in \Ann{R}{x}$ so $x^{n+1} = x \cdot x^n = 0$ so $x = 0$ because $R$ is reduced a contradiction unless $\m = 0$ so $R$ is a field so $\m$ is minimal showing that $\p A_\p \subset A_\p$ and thus $\p \subset A$ are minimal primes and that $A_\p$ is a field. 
\end{proof}

\begin{lemma}
Let $A$ be a ring and $\p \subset A$ a prime then $\WAss{A}{A / \p} = \{ \p \}$. 
\end{lemma}

\begin{proof}
For nonzero $a \in A / \p$ (i.e. $a \notin \p$) the set $\Ann{A}{a} = \{ r \in A \mid ra \in \p \} = \p$ since $\p$ is prime and therefore therefore $\p$ is the unique minimal prime over an annihilator.
\end{proof}

\begin{proposition} \label{noetherian_finite_wass}
Let $A$ be a ring and $M$ a Noetherian $A$-module. Then,
\begin{enumerate}
\item there exists a finite filtration,
\[ (0) = M_0 \subsetneq M_1 \subsetneq M_2 \subsetneq \cdots \subsetneq M_n = M \]
such that each $M_{i} / M_{i-1} \cong A / \p_{i}$ for some $\p_i \in \supp{A}{M}$
\item for any such filtration, $\WAss{A}{M} \subset \{ \p_1, \p_2, \dots, \p_n\}$
\item $\WAss{A}{M}$ is finite.
\end{enumerate}
\end{proposition}

\begin{proof}
Since $M \neq (0)$ there is some $\p \in \WAss{A}{M}$ so we have an injection $A / \p \to M$ let $M_1 \subset M$ be the image of this map so $M_1 / M_0 \cong A / \p_1$. Now take $M / M_1$ and $\p_2 \in \WAss{A}{M/M_1}$ then we have an injection $A / \p_2 \to M/M_1$ so take $\bar{M}_2$ to be the image inside $M/M_1$ and $M_2$ its preimage in $M$. Then $M_2 / M_1 \cong A / \p_2$ and continuing by induction we construct a sequence,
\[ 0 \subsetneq M_1 \subsetneq M_2 \subsetneq M_3 \subsetneq \cdots \]
with $M_{i}/M_{i-1} = A / \p_i$ and 
\[ \p_i \in \WAss{A}{M/M_{i-1}} \subset \Supp{A}{M/M_{i-1}} \subset \Supp{A}{M} \]
However, $M$ is Noetherian so this sequence must stabilize but it is striclty increasing when $M_i \subset M$ is proper. Thus, $M_n  = M$ for some $n$. 
\bigskip\\
For any such filtration we get exact sequences,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & M_i \arrow[r] & M_{i+1} \arrow[r] & A / \p_{i+1} \arrow[r] & 0
\end{tikzcd}
\end{center}
Assume for induction that $\Ass{A}{M_i} \subset \{\p_1, \dots, \p_i \}$ then, by Lemma \ref{exact_seq_weak_ass},
\[ \WAss{A}{M_{i+1}} \subset \WAss{A}{M_i} \cup \WAss{A}{A / \p_{i+1}} \subset \{\p_1, \dots, \p_{i+1} \} \]
proving (b) by induction. (c) follows directly from (a) and (b). 
\end{proof}

\subsection{Associated Primes}

\begin{defn}
Let $A$ be a ring and $M$ an $A$-module. We say that $\p \subset A$ is an \textit{associated prime} of $M$ if $\p = \Ann{A}{m}$ for some $m \in M$. We write $\Ass{A}{M}$ for the set of associated primes of $M$.
\end{defn}

\begin{rmk}
Note $\p = \Ann{A}{m} \iff A / \p \embed M$ via $a \mapsto a \cdot m$.
\end{rmk}

\begin{rmk}
Clearly $\Ass{A}{M} \subset \WAss{A}{M}$. We will see equality holds when $A$ is Noetherian.
\end{rmk}


\begin{lemma}
Given an exact sequence of $A$-modules,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & M_1 \arrow[r] & M_2 \arrow[r] & M_3
\end{tikzcd}
\end{center}
we have, 
\[ \Ass{A}{M_2} \subset \Ass{A}{M_1} \cup \Ass{A}{M_3} \]
\end{lemma}

\begin{proof}
If $\p \in \Ass{A}{M}$ then we have an embedding
\begin{center}
\begin{tikzcd}
A / \p \arrow[r, hook] & M_2
\end{tikzcd}
\end{center}
which is injective and $\iota(A / \p) \cap N_1 = (0)$
then we get an injective map $A / \p \to M_3$ so $\p \in \Ass{A}{M_3}$. If $\iota(A / \p) \cap M_1 \neq (0)$ then take nonzero $n \in \iota(A / \p) \cap M_1$. Then $\Ann{A}{n} = \Ann{A}{\iota(x)}$ for $x \in A / \p$ nonzero. However, if $a \cdot \iota(x) = 0$ then $\iota(a \cdot x) = 0$ but $\iota$ is injective so $a \cdot x = 0$ and thus $\Ann{A}{\iota(x)} = \Ann{A}{x} = \p$ because if $a \cdot x \in \p$ for $x \notin \p$ then $a \in \p$. 
\end{proof}

\begin{lemma}
Let $S_{M, \p} = \{ \Ann{A}{m} \subset \p \mid m \in M \setminus \{0\} \}$ then any maximal element in $S_{M, \p}$ is a prime ideal.
\end{lemma}

\begin{proof}
Let $\q \in S_{M, \p}$ be maximal with $\q = \Ann{A}{m}$ for $m \neq 0$. Suppose $ab \in \q$ and $a, b \notin \q$. Then $\q \subsetneq \Ann{A}{a m}$ since $b \in \Ann{A}{a m} \setminus \Ann{A}{m}$ so by maximality $\Ann{A}{am} \not\subset \p$. Choose $s \in \Ann{A}{am} \setminus \p$. Then $a \in \Ann{A}{sm}$ so $\Ann{A}{m} \subsetneq \Ann{A}{sm}$ and thus by maximality we can choose $t \in \Ann{A}{sm} \setminus \p$ so $st \in \Ann{A}{m} \subset \p$ but $s,t \notin \p$ contradicting the primality of $\p$. Thus $\q$ is prime. 
\end{proof}

\begin{prop}
Let $A$ be Noetherian and $M$ be an $A$-module. Then,
\[ \Ass{A}{M} = \WAss{A}{M}  \]
In particular, $\Ass{A}{M} \neq \empty$ and all other properties of $\WAss{A}{M}$ apply to $\Ass{A}{M}$.
\end{prop}

\begin{proof}
$\Ass{A}{M} \subset \WAss{A}{M}$ is obvious. If $\p \in \WAss{A}{M}$ then $\p \supset \Ann{A}{m}$ for some $m \in M$ and thus $m$ is nonzero in $M_\p$ so $\p \in \Supp{A}{M}$. Let $A$ be Noetherian then ascending chains in $S_{M, \p}$ stabilize and thus by Zorn's Lemma every annhilator $\Ann{A}{m} \subset \p$ is contained in some maximal $\Ann{A}{m'} \subset \p$. Thus, if $\p \in \WAss{A}{M}$ then $\p$ is a minimal prime over some $\Ann{A}{m}$ so $\p = \Ann{A}{m'}$ since $\Ann{A}{m'}$ is prime and $\Ann{A}{m} \subset \Ann{A}{m'} \subset \p$.
\end{proof}


\begin{lemma} \label{ass_primes_localization}
Let $A$ be a ring and $M$ an $A$-module and $S \subset A$ a multiplicative subset. Then.
\begin{enumerate}
\item $\Ass{A}{S^{-1} M} = \Ass{S^{-1} A}{S^{-1} M}$ 
\item $\Ass{A}{M} \cap \Spec{S^{-1} A} \subset \Ass{A}{S^{-1} M}$ with equality when $A$ is Noetherian.
\end{enumerate}
\end{lemma}

\begin{proof}
Tag 05BZ.
\end{proof}


\begin{proposition} \label{noetherian_finite_wass}
Let $A$ be a Noetherian ring and $M$ a finite $A$-module. Then,
\begin{enumerate}
\item there exists a finite filtration,
\[ (0) = M_0 \subsetneq M_1 \subsetneq M_2 \subsetneq \cdots \subsetneq M_n = M \]
such that each $M_{i} / M_{i-1} \cong A / \p_{i}$ for some $\p_i \in \supp{A}{M}$
\item for any such filtration, $\Ass{A}{M} \subset \{ \p_1, \p_2, \dots, \p_n\}$
\item $\Ass{A}{M}$ is finite.
\end{enumerate}
\end{proposition}

\begin{proof}
$M$ is a Noetherian module so this applies directly from Prop. \ref{noetherian_finite_wass}.
\end{proof}

\subsection{Primary Decomposition}

\begin{rmk}
In this section we let $A$ be a Noetherian ring.
\end{rmk}

\begin{definition}
An $A$-module $M$ is called coprimary if $\Ass{A}{M} = \{\p\}$ and if $N \subset M$ we say that $N$ is $\p$-primary if $M / N$ is coprimary with $\Ass{A}{M/N} = \{ \p \}$.  
\end{definition}

\begin{lemma}
$M$ is coprimary iff any zero divisor of $M$ is locally nilpotent i.e. if $a \cdot m = 0$ for some $m \in M \setminus \{0\}$ then $\forall m' \in M : a^n \cdot m' = 0$ for some $n$. 
\end{lemma}

\begin{proof}
Assume that $M$ is coprimary, $\Ass{A}{M} = \{ \p \}$. If $x \in M$ is nonzero then $Ax$ is a nonzero submodule of $M$ so $\Ass{A}{Ax} = \{ \p \}$ since it is nonempty. Therefore, $\p$ is a minimal element in $\Supp{A}{A x} = V(\Ann{A}{x})$
because $Ax \cong A / \Ann{A}{x}$. Thus, $\sqrt{\Ann{A}{x}} = \p$. If $a$ is a zero divisor of $M$ then $a \in \p$ so $a^n \in \Ann{A}{x}$ so $a$ is locally nilpotent. Converely, assume that the set of zero divisors equals the set of locally nilpotent elements. Take $\p$ to be the ideal of all locally nilpotents. Take $\q \in \Ass{A}{M}$ then $\q = \Ann{A}{x}$ for some $x$. If $a \in \p$ then $a^n \cdot x = 0$ for some $n$ implies that $a^n \in \q$ so $a \in \q$. so $\p \subset \q$. Furthermore,
\[ \bigcup_{\q \in \Ass{A}{M}} \q = \{ \text{zero divisors} \} = \p \]
so for any $\q \in \Ass{A}{M}$ we have $\q \subset \p$. Thus, $\p = \q$ so $\Ass{A}{M}$ constains a unique prime.
\end{proof}

\begin{corollary}
If $I \subset A$ is an ideal then $\Ass{A}{A / I} = \{ \p \}$ if and only if $I$ is a primary ideal and in that case $\sqrt{I} = \p$. 
\end{corollary}

\begin{proof}
Consider $I \subset A$ and $A / I$ is coprimary then take $x,y \in A$ such that $y \notin I$ and $\bar{x} \cdot \bar{y} = 0$ in $A / I$. Then $\bar{x}$ is a zero divisor of $A / I$ so it is locally nilpotent by the above. Thus, $\bar{x}^n \cdot 1 = 0$ for some $n$ so $x^n \in I$ so $x \in \sqrt{I}$ and thus $I$ is primary. Furthermore,
\[ \sqrt{I} = \bigcap_{\p \in V(I)} \p = \bigcap_{\p \in \Supp{A}{A / I}} \p = \bigcap_{\p \in \Ass{A}{A / I}} \p = \p \]
since $\Ass{A}{M}$ is the set of minimal primes of $\Supp{A}{M}$ and $\Ass{A}{A / I} = \p$.  
\end{proof}

\begin{definition}
Let $M$ be an $A$-module and $N \subset M$. We say $N$ has a primary decomposition if,
\[ N = Q_1 \cap Q_2 \cap \cdots \cap Q_n \]
where each $Q_i$ is primary. Moreover, we say that this decomposition is irredundant if 
\begin{enumerate}
\item if $i \neq j$ then $\Ass{A}{M / Q_i} \neq \Ass{A}{M / Q_j}$ 

\item we cannot remove any $Q_j$ from the intersection.
\end{enumerate}
\end{definition}

\begin{lemma}
Let $M$ be an $A$-module then,
\begin{enumerate}
\item If $Q_1, Q_2 \subset M$ are $\p$-primary then $Q_1 \cap Q_2$ is $\p$-primary.  

\item If $N = Q_1 \cap \cdots \cap Q_n$ is a irredundant primary decomposition and for each $i$, $Q_i$ is $\p_i$-primary then,
\[ \Ass{A}{M / N} = \{ \p_1, \dots, \p_n \} \] 
\end{enumerate}
\end{lemma}

\begin{proof}
Consider the injection,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & M / Q_1 \cap Q_2 \arrow[r, hook] & M / Q_1 \oplus M / Q_2
\end{tikzcd}
\end{center}
which implies that,
\[ \Ass{A}{M / Q_1 \cap Q_2} \subset \Ass{A}{M / Q_1 \oplus M / Q_2} = \Ass{A}{M/Q_1} \cup \Ass{A}{M/Q_2} = \{ \p \} \]
proving the first.
For the second, consider the injection,
\begin{center}
\begin{tikzcd}
M / N \arrow[r, hook] & M / Q_1 \oplus \cdots \oplus M / Q_n 
\end{tikzcd}
\end{center}
which implies that,
\[ \Ass{A}{M / N} \subset \Ass{A}{M/Q_1} \cup \cdots \cup \Ass{A}{M/Q_n} \subset \{ \p_1, \dots, \p_n \} \]
We need to show that $\p_i \in \Ass{A}{M / N}$ for each $i$.
We have the exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & N \arrow[r] & Q_2 \cap \cdots \cap Q_n \arrow[r] & M / Q_1
\end{tikzcd}
\end{center}
and therefore,
\begin{center}
\begin{tikzcd}
(Q_2 \cap \cdots \cap Q_n) / N \arrow[r, hook] & M / Q_1
\end{tikzcd}
\end{center}
which implies that,
\[ \Ass{A}{(Q_2 \cap \cdots \cap Q_n) / N} \subset \Ass{A}{M / Q_1} = \{ \p_1 \} \]
so since it is nonempy we have,
\[ \{ \p_1 \} = \Ass{A}{(Q_2 \cap \cdots \cap Q_n) / N} \subset \Ass{A}{M / N} \]
where the inclusion holds via the exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & N \arrow[r] & Q_2 \cap \cdots \cap Q_n \arrow[r] & M / N
\end{tikzcd}
\end{center}
The same argument holds for each $i$. 
\end{proof}

\begin{theorem}
Let $M$ be Noetherian. For each $\p \in \Ass{A}{M}$, there exist $Q_{\p} \subset M$ which are $\p$-primary such that,
\[ \bigcap_{\p \subset \Ass{A}{M}} Q_{\p} = 0 \]
\end{theorem}

\begin{proof}
Fix $\p \in \Ass{A}{M}$ and consider the set $S_{\p} = \{ Q \subset M \mid \p \notin \Ass{A}{Q} \} \neq \varnothing$ since the zero module is contained in this set. Since $M$ is Noetherian ascending chains stabilize so by Zorn's lemma there exists a maximal element $Q_\p \in S_\p$. We know,
\[ \Ann{A}{M / Q_\p}  \neq \varnothing \]
since we have $M / Q_\p \neq (0)$. Otherwise, $M = Q_\p$ which implies $\p \in \Ass{A}{Q_\p}$ but $Q_\p \in S_\p$. Let $\p' \in \Ass{A}{M / Q_\p}$ and suppose that $\p' \neq \p$ then we have,
\begin{center}
\begin{tikzcd}
A / \p' \arrow[r, hook] & M / Q_\p
\end{tikzcd}
\end{center}    
The image of this embedding is a submodule, $Q_\p \subsetneq Q' \subset M$ such that $Q' / Q_\p \cong A / \p'$ implying that,
\[ \Ass{A}{Q' / Q_\p} = \{ \p' \} \]
Thus we have an exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & Q_\p \arrow[r] & Q' \arrow[r] & A / \p \arrow[r] & 0
\end{tikzcd}
\end{center}
which implies that $\Ass{A}{Q'} \subset \Ass{A}{Q_\p} \cup \Ass{A}{A / \p'} =  \Ass{A}{Q_\p} \cup \{ \p' \}$.
However, this contradicts the fact that $Q_\p$ is maximal in $S_\p$ since $Q' \in S_\p$ as long as $\p' \neq \p$. Therefore, $\p' = \p$ so $\Ass{A}{A / Q_\p} = \{ \p \}$. Now consider,
\[ \Ass{A}{\bigcap_{\p \in \Ass{A}{M}} Q_\p} \subset \bigcap_{\p \in \Ass{A}{M}} \Ass{A}{Q_\p} = \varnothing \]
because for any $\p$ we know $\p \notin \Ass{A}{Q_\p}$. Therefore,
\[ \bigcap_{\p \in \Ass{A}{M}} Q_\p = (0) \]
since it has no associated primes. 
\end{proof}

\begin{corollary}
If $M$ is a finite $A$-module then any submodule has a primary decomposition. 
\end{corollary}

\begin{proof}
Let $N \subset M$ be a submodule. 
Apply the theorem to $\bar{M} = M / N$ which has finite type so $\Ass{A}{M / N}$ is finite. Write, $\Ass{A}{M / N} = \{ \p_1, \dots, \p_r \}$. Therefore, there exist primary ideals $Q_i$ such that,
\[ Q_{\p_1} \cap \cdots \cap Q_{\p_r} = (0) \]
in $M / N$. Take $Q_i$ to be the preimage of $Q_{\p_i}$. Thus,
\[ Q_1 \cap \cdots \cap Q_r = N \]
and 
\[ M / Q_i \cong \bar{M} / Q_{\p_i} \implies \Ass{A}{M / Q_i} = \{ \p_i \} \]
\end{proof}


\subsection{Weakly Associated Points}

\begin{defn}
Let $X$ be a scheme and $\F$ a quasi-coherent $\struct{X}$-module. Then we define,
\begin{enumerate}
\item $x \in X$ is \textit{weakly associated} to $\F$ if $\m_x \subset \stalk{X}{x}$ is weakly associated to $\F_x$
\item $\WAss{\struct{X}}{\F}$ is the set of weakly associated points of $\F$
\item the (weakly) associated points of $X$ are $\WAss{\struct{X}}{\struct{X}}$.
\end{enumerate}
\end{defn}

\begin{prop}
Let $X = \Spec{A}$ and $\F = \wt{M}$ be a quasi-coherent $\struct{X}$-module then we have,
\[ \WAss{\struct{X}}{\F} = \WAss{A}{M} \]
\end{prop}

\begin{proof}
Immediate consequence of Lemma \ref{weak_ass_primes_localization}.
\end{proof}

\begin{prop}
Let $X$ be a scheme and $\F$ a quasi-coherent sheaf. Then,
\[ \F = 0 \iff \WAss{\struct{X}}{\F} = 0 \]
\end{prop}

\begin{proof}
Choose an affine open cover $U_i = \Spec{A_i}$ such that $\F|_{U_i} = \wt{M_i}$. Then $\WAss{A}{M_i} = \WAss{\struct{X}}{\F} \cap U_i = \empty$ so $M_i = 0$ and thus $\F = 0$. 
\end{proof}

\begin{prop}
Let $X$ be a scheme and $\F \to \G$ a morphism of quasi-coherent $\struct{X}$-modules. If $\F_x \to \G_x$ is injective for each $x \in \WAss{\struct{X}}{\F}$ then $\F \to \G$ is injective.
\end{prop}

\begin{proof}
Consider the sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \K \arrow[r] & \F \arrow[r] & \G
\end{tikzcd}
\end{center}
Since $\F_x \to \G_x$ is an injection $\K_x = 0$ for each $x \in \WAss{\struct{X}}{\F}$. Furthermore, $\WAss{\struct{X}}{\K} \subset \WAss{\struct{X}}{\F}$ and thus $\WAss{\struct{X}}{\K} = \empty$ so $\K = 0$.
\end{proof}

\subsection{Associated Points: the Noetherian Case}

\begin{rmk}
By analogy, we might define an \textit{associated point} of $\F$ on $X$ to be a point $x \in X$ such that $\m_x \subset \stalk{X}{x}$ is an associated prime of $\F_x$. However, this definition is problematic because, in general, associated primes do not play nicely with localization. In particular $\p \in \Ass{A}{M} \implies \p A_\p \in \Ass{A_\p}{M_\p}$ but the converse may not hold. Therefore, we may have a scheme $X$ and a quasi-coherent sheaf $\F$ such that on an affine open $U = \Spec{A}$ with $\F |_U = \wt{M}$ we have $\p \in \Ass{A}{M}$ but $\p = x \in X$ is not as associated point of $\F$ on $X$. To recify this pathology, we only consider associated points on locally noetherian schemes in which case there is no difference between weakly associated points and associated points. 
\end{rmk}

\begin{defn}
Let $X$ be a locally noetherian scheme and $\F$ a quasi-coherent $\struct{X}$-module. We say $x \in X$ is an \textit{associated point} of $\F$ if $x$ is a \textit{weakly associated point}. Likewise we write, 
\[ \Ass{\struct{X}}{\F} = \WAss{\struct{X}}{\F} \]
\end{defn}

\begin{rmk}
Notice this definition is purely notational. In the locally noetherian case we simply will write $\Ass{\struct{X}}{\F}$ for $\WAss{\struct{X}}{\F}$ as a reminder that these sets behave as expected for associated points in the case of Noetherian rings.
\end{rmk}

\begin{prop}
Let $X$ be noetherian and $\F$ a coherent $\struct{X}$-module. Then $\Ass{\struct{X}}{\F}$ is finite.
\end{prop}

\begin{proof}
Since $X$ is quasi-compact we may choose a finite open cover $U_i = \Spec{A_i}$ with $A_i$ Noetherian on which $\F|_{U_i} = \wt{M_i}$ for finite $A_i$-modules. Then $\Ass{\struct{X}}{\F} \cap U = \Ass{A_i}{M_i}$ each of which is finite  since $M_i$ is a Noetherian module.
\end{proof}

\section{Depth}

\subsection{Definitions}

\begin{defn}
Let $A$ be a ring $I \subset A$ an ideal and $M$ a finite $A$-module. Then $x_1, \dots, x_r \in I$ are an $M$-\textit{regular sequence in} $I$ if
\begin{enumerate}
\item $x_i$ is a nonzerodivisor on $M / (x_1, \dots, x_{i-1}) M$ for each $i \in \{1, \dots, r \}$
\item $M / (x_1, \dots, x_r)M$ is nonzero. 
\end{enumerate}
We say that $\depth{I}{M}$ is the supremum of the lengths of $M$-regular sequence in $I$ unless $IM = M$ in which case $\depth{I}{M} = \infty$.
\end{defn}

\begin{rmk}
If $IM \subsetneq M$ then $\depth{I}{M} = 0$ iff $I \subset \{ \text{zero divisors on } M \}$.
\end{rmk}

\begin{rmk}
If $(A, \m)$ is a local ring then we define $\depth{}{M} := \depth{\m}{M}$.
\end{rmk}

\subsection{The Cohomological Criterion}

\begin{lemma}
Let $A$ be a Noetherian ring, $I \subset R$ an ideal, and $M$ a finite $A$-module with $IM \neq M$. Then the following are equivalent,
\begin{enumerate}
\item $\Ext{i}{A}{N}{M} = 0$ for all $i < n$ and all finite $A$-modules $N$ with $\Supp{A}{N} \subset V(I)$

\item $\Ext{i}{A}{A/I}{M} = 0$ for all $i < n$

\item there exists a finite $A$-module $N$ with $\Supp{A}{N} = V(I)$ and $\Ext{i}{A}{N}{M} = 0$ for all $i < n$

\item there exists an $M$-regular sequence $x_1, \dots, x_n \in I$ of length $n$
\end{enumerate}
and therefore $\depth{I}{M} = \inf \{ n \in \Z \mid \Ext{i}{A}{A/I}{M} \neq 0 \}$.
\end{lemma}

\begin{proof}
Clearly (a) $\implies$ (b) $\implies$ (c). Now we show that (c) $\implies$ (d).

Finally, we need to show that (d) $\implies$ (a).
(DOOOOOOOOOOOOOOOOOOOOOOO!! OR SPLIT UP THIS PROOF!!)
\end{proof}

\begin{rmk}
From here on, let $A$ be a Noetherian ring and $I \subset A$ an ideal and $M$ a finite $A$-module with $IM \neq M$.
\end{rmk}

\begin{lemma}
Consider an exact sequence of finite $A$-modules such that $I M_i \neq M_i$, 
\begin{center}
\begin{tikzcd}
0 \arrow[r] & M_1 \arrow[r] & M_2 \arrow[r] & M_3 \arrow[r] & 0
\end{tikzcd}
\end{center}
Then the following hold,
\begin{enumerate}
\item $\depth{I}{M_2} \ge \min \{ \depth{I}{M_1}, \depth{I}{M_3} \}$

\item $\depth{I}{M_1} \ge \min \{ \depth{I}{M_2}, \depth{I}{M_3} + 1 \}$

\item $\depth{I}{M_3} \ge \min \{ \depth{I}{M_1} - 1, \depth{I}{M_2} \}$
\end{enumerate}
\end{lemma}

\begin{proof}
Apply the functor $\Hom{A}{A/I}{-}$ to give the long exact sequence,
\begin{center}
\begin{tikzcd}
\Ext{i}{A}{A/I}{M_1} \arrow[r] & \Ext{i}{A}{A/I}{M_2} \arrow[r] & \Ext{i}{A}{A/I}{M_3} \arrow[r] & \Ext{i+1}{A}{A/I}{M_1}   
\end{tikzcd}
\end{center}
If $i < n = \min \{ \depth{I}{M_1}, \depth{I}{M_3} \}$ then $\Ext{i}{A}{A/I}{M_2} = 0$ applying the cohomological criterion and the exact sequence so $\depth{I}{M_3} \ge n$. The other parts follow similarly.
\end{proof}

\begin{lemma}
Let $x$ be a nonzerodivisor on $M$ then $\depth{I}{M/xM} = \depth{I}{M} - 1$.
\end{lemma}

\begin{proof}
Applying the previous Lemma to the exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & M \arrow[r, "\times x"] & M \arrow[r] & M / x M \arrow[r] & 0 
\end{tikzcd}
\end{center}
gives $\depth{I}{M/xM} \ge \depth{I}{M} - 1$. However, for any $M/xM$-regular sequence $x_1, \dots, x_n \in I$ we get a $M$-regular sequence $x, x_1, \dots, x_n \in I$ and thus $\depth{I}{M} \ge \depth{I}{M/xM} + 1$.
\end{proof}

\begin{cor}
Any $M$-regular sequence $x_1, \dots, x_r \in I$ can be extended to a regular sequence of length $\depth{I}{M}$ and thus all maximal regular sequences have the same length.
\end{cor}

\begin{proof}
Given an $M$-regular sequence $x_1, \dots, x_r \in I$ we apply the previous Lemma to show that,
\[ \depth{I}{M/(x_1, \dots, x_r)M} = \depth{I}{M} - r \]
and thus there exists a regular sequence $x_{r+1}, \dots, x_d \in I$ for $M/(x_1, \dots, x_r)M$ meaning that $x_1, \dots, x_r, \cdots, x_d \in $ gives a $M$-regular sequence of length $\depth{I}{M}$ extending $x_1, \dots, x_r$.
\end{proof}

\subsection{Vanishing Criteria on Ext}

(GRADE AND (Ischebeck))

\subsection{Locality of Depth}

\begin{prop}
Let $A$ be a noetherian ring, $I \subset A$ an ideal, and $M$ a finite $A$-module. Then,
\[ \depth{I}{M} = \inf \{ \depth{}{M_\p} \mid \p \in V(I) \} \]
\end{prop}

\begin{proof}
DOOOOOOOOOOO!!!!
\end{proof}

\subsection{Additional Lemmas}


\begin{prop}
Let $A$ be Noetherian ring, $I \subset A$ an ideal, and $M$ a finite $A$-module. Then there exists an exact sequence of finite $A$-modules,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & K \arrow[r] & F_{r-1} \arrow[r] & \cdots \arrow[r] & F_1 \arrow[r] & F_0 \arrow[r] & M \arrow[r] & 0
\end{tikzcd}
\end{center}
where $F_i$ are finite free $A$-modules and $r = \depth{}{A} - \depth{}{M}$. Furthermore, given any such sequence, $\depth{}{K} = \depth{}{A}$. 
\end{prop}

\begin{proof}
There always exists a surjection $F_0 \onto M$ from a finite free module $F_0$ because $M$ is finite. Extending to an exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & K_1 \arrow[r] & F_0 \arrow[r] & M \arrow[r] & 0
\end{tikzcd}
\end{center}
gives $\depth{I}{K} \ge \min\{ \depth{I}{A}, \depth{I}{M}  + 1\}$ because $F_0$ is free so clearly $\depth{I}{F_0} = \depth{I}{A}$ by the cohomological criterion. Thus either $\depth{I}{K} \ge \depth{I}{A}$ already or  $\depth{I}{K} \ge \depth{I}{M} + 1$. Therefore, repeating this process $r$ times we see that $\depth{I}{K_r} \ge \depth{I}{M}$
\end{proof}

\subsection{Cohen-Macaulay Rings}


(IS THIS CORRECT AS STATED!!)
\begin{prop}
Let $A$ be a ring, $I \subset A$ an ideal, and $M$ a finite $A$-module. Then,
\[ \depth{I}{M} \le \min_{\p \in \WAss{A}{M}} \dim{A/\p} \le \dim{\Supp{A}{M}} \] 
\end{prop}

\begin{defn}
Let $A$ be a Noetherian local ring. A finite $A$-module $M$ is \textit{Cohen-Macaulay} if,
\[ \depth{}{M} = \dim{\Supp{A}{M}} \]
We say that $A$ is Cohen-Macaulay if it is Cohen-Macaulay as an $A$-module i.e. if $\depth{}{A} = \dim{A}$.
\end{defn}

\begin{lemma}
If $A$ is a Cohen-Macaualy Noetherian local ring then for any prime $\p \in \Spec{A}$ the local ring $A_\p$ is Cohen-Macaulay.
\end{lemma}

\begin{proof}
Tag 0AAG
\end{proof}

\begin{rmk}
This Lemma allows for the following definition.
\end{rmk}

\begin{defn}
A ring $A$ is Cohen-Macaulay if $A$ is Noetherian and $A_\p$ is Cohen-Macaualy for each $\p \in \Spec{A}$.
\end{defn}

(UNIVERSALLY CATENARY ETC..)


(FIX THIS STATEMENT!!)

\begin{prop}
Let $R$ be a regular local ring and $M$ a finite $A$-module. Then any exact sequence of finite $A$-modules
\end{prop}

\subsection{Dimension}

\begin{prop}
Let $(A, \m)$ be a Noetherian local ring and $f \in \m$. Then,
\[ \dim{A/(f)} \ge \dim{A} - 1 \]
with equality iff $f$ is a nonzero divisor.
\end{prop}

\begin{proof}
https://math.stackexchange.com/questions/2085779/the-dimension-modulo-a-principal-ideal-in-a-noetherian-local-ring
\end{proof}


\subsection{Properties}

\begin{prop}
Let $(A, \m)$ be a Noetherian local ring and $f \in \m$ a nonzero divisor. Then $A$ is Cohen-Macaulay iff $A / (f)$ is Cohen-Macaulay.
\end{prop}

\begin{proof}
We have $\depth{}{A/(f)} = \depth{}{A} - 1$ and $\dim{A/(f)} = \dim{A} - 1$.
\end{proof}



\section{Projective and Global Dimension}

\subsection{Projective Dimension}

\newcommand{\pd}[2]{\mathrm{pd}_{#1} \left( #2 \right)}

\begin{defn}
Let $M$ be an $A$-module. Then the projective dimension $\pd{A}{M}$ is the minimal length $r$ of a projective resolution of $M$,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & P_r \arrow[r] & \cdots \arrow[r] & P_1 \arrow[r] & P_0 \arrow[r] & M \arrow[r] & 0
\end{tikzcd}
\end{center}
and $\pd{A}{M} = \infty$ if there does not exist a finite-length projective resolution of $M$.
\end{defn}

\begin{lemma}[Schanuel's lemma]
Let $A$ be a ring and $M$ an $A$-module. Let,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & K \arrow[r, "c_1"] & P_1 \arrow[r, "p_1"] & M \arrow[r] & 0 & & 0 \arrow[r] & L \arrow[r, "c_2"] & P_2 \arrow[r, "p_2"] & M \arrow[r] & 0
\end{tikzcd}
\end{center}
be two short exact sequences of $A$-module where $P_i$ are projective. Then there exists an isomorphism of short exact sequences,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & K \oplus P_2 \arrow[d] \arrow[r, "(c_1 \, \id)"] & P_1 \oplus P_2 \arrow[d] \arrow[r, "(p_1 \, 0)"] & M \arrow[r] \arrow[d, equals] & 0
\\
0 \arrow[r] & P_1 \oplus L \arrow[r, "(\id \, c_2)"'] & P_1 \oplus P_2 \arrow[r, "(p_2 \, 0)"'] & M \arrow[r] & 0
\end{tikzcd}
\end{center}
\end{lemma}

\begin{proof}
Using projectivity of $P_1$ and $P_2$ we get maps $a : P_1 \to P_2$ and $P_2 \to P_1$ over $M$ meaning that $p_2 \circ a = p_1$ and $p_1 \circ b = p_2$. Therefore, we get a diagram,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & K \oplus P_2 \arrow[r, "(c_1 \, \id)"] & P_1 \oplus P_2 \arrow[r, "(p_1 \, 0)"] & M \arrow[r] \arrow[d, equals] & 0
\\
0 \arrow[r] & N \arrow[d, dashed] \arrow[u, dashed] \arrow[r] & P_1 \oplus P_2 \arrow[d, "s"] \arrow[u, "t"'] \arrow[r, "(p_1 \, p_2)"] & M \arrow[r] \arrow[d, equals] & 0
\\
0 \arrow[r] & P_1 \oplus L \arrow[r, "(\id \, c_2)"'] & P_1 \oplus P_2 \arrow[r, "(p_2 \, 0)"'] & M \arrow[r] & 0
\end{tikzcd}
\end{center}
where $t(x,y) = (x + b(y), y)$ and $s(x,y) = (x, y + a(x))$ such that,
\[ (p_1, 0) \circ t = p_1 \circ (\id + b) = p_1 + p_2 \quad \text{and} \quad (0, p_2) \circ s = p_2 \circ (\id + a) = p_1 + p_2 \]
so the diagram commutes inducing maps $N \to K \oplus P_2$ and $N \to P_1 \oplus L$ where $N = \ker{(P_1 \oplus P_2 \to M)}$. It is clear that $t$ and $s$ are isomorphisms and thus the induced maps are also isomorphisms proving the claim.
\end{proof}

\begin{lemma}
Let $A$ be a ring and $M$ an $A$-module with finite projective dimension. Then for any projective resolution,
\begin{center}
\begin{tikzcd}
\cdots \arrow[r] & P_2 \arrow[r] & P_1 \arrow[r] & P_0 \arrow[r] & M \arrow[r] & 0
\end{tikzcd}
\end{center}
the module $\ker{(P_k \to P_{k-1})}$ is projective for $k \ge \pd{A}{M} - 1$.
\end{lemma}

\begin{proof}
We proceed by induction on $\pd{A}{M}$. For the case $\pd{A}{M} = 0$ then $M$ is projective so the exact sequence,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & K \arrow[r] & P_0 \arrow[r] & M \arrow[r] & 0
\end{tikzcd}
\end{center}
splits so $P_0 = K \oplus M$ proving that $K$ is also projective giving the case $k = 0$. Replacing $M$ by $K = \ker{(P_0 \to M)}$ we prove $\ker{(P_k \to P_{k-1})}$ is projective for all $k$.
\bigskip\\
Now for induction suppose $\pd{A}{M} = d + 1$ and let,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \tilde{P}_{d+1} \arrow[r] & \cdots \arrow[r] & \tilde{P}_1 \arrow[r] & \tilde{P}_0 \arrow[r] & M \arrow[r] & 0
\end{tikzcd}
\end{center}
be a minimal length projective resolution. By Schanuel's lemma,
\[ \tilde{P}_0 \oplus \ker{(P_0 \to M)} \cong P_0 \oplus \ker{(\tilde{P}_0 \to M)} \]
If $\pd{A}{M} = 1$ and $k = 0$ then $\ker{(\tilde{P}_0 \to M)}$ is projective meaning that $\ker{(P_0 \to M)}$ is projective as well. Otherwise let $k > 0$ and consider the projective resolutions,
\begin{center}
\begin{tikzcd}
\cdots \arrow[r] & P_3 \arrow[r] & P_2 \arrow[r] & P_1 \arrow[r] & \ker{(P_0 \to M)} \arrow[r] & 0
\\
0 \arrow[r] & \tilde{P}_{d+1} \arrow[r] & \cdots \arrow[r] & \tilde{P}_1 \arrow[r] & \ker{(\tilde{P}_0 \to M)} \arrow[r] & 0
\end{tikzcd}
\end{center}
We cannot directly apply induction because these are not resolutions of the same module. However, applying $- \oplus \tilde{P}_0$ to the first sequence and $- \oplus P_0$ to the second we get projective resolutions of $M' = \tilde{P}_0 \oplus \ker{(P_0 \to M)} \cong P_0 \oplus \ker{(\tilde{P}_0 \to M)}$
\begin{center}
\begin{tikzcd}
\cdots \arrow[r] & P_3 \oplus \tilde{P}_0 \arrow[r] & P_2 \oplus \tilde{P}_0 \arrow[r] & P_1 \oplus \tilde{P}_0 \arrow[r] & M' \arrow[r] & 0
\\
0 \arrow[r] & \tilde{P}_{d+1} \oplus P_0 \arrow[r] & \cdots \arrow[r] & \tilde{P}_1 \oplus P_0 \arrow[r] & M' \arrow[r] & 0
\end{tikzcd}
\end{center}
because direct sum is exact and preserves projectives. From the second sequence $\pd{A}{M'} \le d$ so we may apply induction and find that $\ker{(P_k \oplus \tilde{P}_0 \to P_{k-1} \oplus \tilde{P}_0)} = \ker{(P_{k+1} \to P_{k})} \oplus \tilde{P}_0$ is projective for $k \ge d-1$ and thus $\ker{(P_k \to P_{k-1})}$ is projective for $k \ge d$ completing the proof.
\end{proof}

\begin{lemma}
Let $A$ be a Noetherian ring and $M$ a finite $A$-module. Then the following are equivalent,
\begin{enumerate}
\item $\pd{A}{M} \le d$ 
\item there exists a resolution of $M$ by finite modules $F_i$ and $P_d$,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & P_d \arrow[r] & F_{d-1} \arrow[r] & \cdots \arrow[r] & F_1 \arrow[r] & F_0 \arrow[r] & M \arrow[r] & 0
\end{tikzcd}
\end{center}
where the $F_i$ are finite free and $P_d$ is finite projective.
\end{enumerate}
\end{lemma}

\begin{proof}
Clearly the second implies the first since $F_i$ are projective. Given $\pd{A}{M} \le d$ we know $d - 1 \ge \pd{A}{M} - 1$. Since $A$ is Noetherian and $M$ is finite we can build a finite free resolution,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & P_d \arrow[r] & F_{d-1} \arrow[r] & \cdots \arrow[r] & F_1 \arrow[r] & F_0 \arrow[r] & M \arrow[r] & 0
\end{tikzcd}
\end{center}
by taking a generating set for $M$ and the kernel $\ker{(F_k \to F_{k-1})}$ is again a finite $A$-module by the Noetherian property. Then let $P_d = \ker{(F_{d-1} \to F_{d-2})}$. Since the $F_k$ are projective, by the previous lemma $P_d$ is projective and finite as a submodule of a finite module.
\end{proof}

\begin{lemma}
Let $A$ be a Noetherian local ring and $M$ a finite $A$-module. Then the following are equivalent,
\begin{enumerate}
\item $\pd{A}{M} \le d$ 
\item there exists a resolution of $M$ by finite free modules $F_i$,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & F_d \arrow[r] & F_{d-1} \arrow[r] & \cdots \arrow[r] & F_1 \arrow[r] & F_0 \arrow[r] & M \arrow[r] & 0
\end{tikzcd}
\end{center}
\end{enumerate}
\end{lemma}

\begin{proof}
This follows from above noting that finite projective $A$-modules are free because $A$ is local.
\end{proof}

\begin{prop}
Let $A$ be a ring and $M$ an $A$-module. Then the following are equivalent,
\begin{enumerate}
\item $\pd{A}{M} \le n$
\item $\Ext{i}{A}{N}{M} = 0$ for all $A$-modules $A$ and all $i \ge n + 1$
\item $\Ext{n+1}{A}{N}{M} = 0$ for all $A$-modules.
\end{enumerate}
\end{prop}

\begin{proof}
(DO THIS!!!)
\end{proof}

\begin{lemma}
Consider an exact sequence of $A$-modules,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & M_1 \arrow[r] & M_2 \arrow[r] & M_3 \arrow[r] & 0
\end{tikzcd}
\end{center}
\begin{enumerate}
\item if $\pd{A}{M_2} \le n$ then $\pd{A}{M_1} \le n$ and $\pd{A}{M_3} \le n + 1$
\item if $\pd{A}{M_1} \le n$ and $\pd{A}{M_3} \le n$ then $\pd{A}{M} \le n$
\item if $\pd{A}{M_1} \le n$ and $\pd{A}{M} \le n + 1$ then $\pd{A}{M_3} \le n + 1$.
\end{enumerate}
\end{lemma}

\begin{proof}
Combine the long exact sequence of Ext groups and the previous result.
\end{proof}

\subsection{Global Dimension}

\newcommand{\gldim}[1]{\mathrm{gldim}\left( #1 \right)}

\begin{defn}
Let $A$ be a ring. The global dimension $\gldim{A}$ is the supremum of $\pd{A}{M}$ over all $A$-modules $M$.
\end{defn}

\begin{theorem}
Let $A$ be a ring. The following are equivalent,
\begin{enumerate}
\item $\gldim{A} \le n$
\item $\pd{A}{M} \le n$ for all $A$-modules $M$
\item $\pd{A}{M} \le n$ for all finite $A$-modules $M$
\item $\pd{A}{M} \le n$ for all cyclic $A$-modules $M$.
\end{enumerate}
\end{theorem}

\begin{proof}
Tag 065T.
\end{proof}

\begin{lemma}
Let $A$ be a ring, $M$ an $A$-module, and $S \subset A$ a multiplicative subset then,
\begin{enumerate}
\item $\pd{S^{-1}A}{S^{-1} M} \le \pd{A}{M}$
\item $\gldim{S^{-1} A} \le \gldim{A}$
\end{enumerate}
\end{lemma}

\begin{proof}
The functor $S^{-1}(-) : \Mod{A} \to \Mod{S^{-1} A}$ is exact and preserves projectives because it is left-adjoint to restriction which is also exact. Therefore, if $M$ has a projective $A$-resolution of length $n$ then $S^{-1} M$ has a projective $S^{-1} A$-resolution of length at most $n$ so $\pd{S^{-1} A}{S^{-1} M} \le \pd{A}{M}$. Notice that for any $S^{-1} A$-module $M$, we have $M = S^{-1} M_A$ viewing $M_A$ as an $A$-module under the restriction function. Thus, applying the first part
\begin{align*}
\gldim{S^{-1} A} & = \sup \{ \pd{S^{-1} A}{M} \mid M \in \Mod{S^{-1} A} \} \le \sup \{ \pd{A}{M_A} \mid M \in \Mod{S^{-1} A} \} 
\\
& \le \sup \{ \pd{A}{M} \mid M \in \Mod{A} \} = \gldim{A} 
\end{align*}
\end{proof}

\begin{prop}
Let $R$ be a Noetherian ring. Then,
\[ \gldim{R} = \sup \{ \gldim{R_\p} \mid \p \in \Spec{R} \} = \sup \{ \gldim{R_\m} \mid \m \in \mSpec{R} \} \]
\end{prop}

\begin{proof}
DOO!!!!!!!!!!
\end{proof}

\subsection{Auslander-Buchsbaum}

(MOST GENERAL VERSION!!)

\subsection{Regular Rings}

\begin{rmk}
Throughout let $(R, \m, \kappa)$ be a noetherian local ring. 
\end{rmk}

\begin{lemma}
We always have,
\[ \dim_\kappa \m / \m^2 \ge \dim{R} \]
\end{lemma}

\begin{proof}
By Nakayma, $n = \dim_\kappa \m / \m^2$ is the minimal number of generators of $\m$.   Then by Krull's ideal theorem, $\dim{R} = \height{\m} \le n$.
\end{proof}

\begin{cor}
When $R$ is a Noetherian local ring, $\dim{R}$ is finite.
\end{cor}

\begin{proof}
$\dim_\kappa \m / \m^2$ is finite because $\m$ is finitely generated since $R$ is Noetherian.
\end{proof}

\begin{defn}
We say that $R$ is a \textit{regular local ring} if $\dim_\kappa \m / \m^2 = \dim{R}$.
\end{defn}

\begin{prop}
Let $R$ be a regular local ring. Then $\gldim{R} \le \dim{R}$.
\end{prop}

\begin{proof}
DO!!!!
\end{proof}

\begin{prop}
Let $(R, \m, \kappa)$ be a noetherian local ring then $\pd{R}{\kappa} \ge \dim_\kappa \m / \m^2$.
\end{prop}

\begin{proof}
Tag 00OA.
\end{proof}

\begin{prop}
If $\pd{R}{\kappa} < \infty$ then $\dim{R} \ge \pd{R}{\kappa}$.
\end{prop}

\begin{proof}
Tag 00OB.
\end{proof}

\begin{prop}
Let $R$ be a Noetherian local ring. If $\pd{R}{\kappa} < \infty$ then $R$ is a regular local ring.
\end{prop}

\begin{proof}
The above propositions give $\dim{R} \ge \pd{R}{\kappa} \ge \dim_\kappa \m / \m^2$ but $\dim_\kappa \m / \m^2 \ge \dim{R}$.
\end{proof}

\begin{prop}
Let $(R, \m, \kappa)$ be a noetherian local ring. Then $\gldim{R} < \infty$ if and only if $R$ is a regular local ring in which case $\gldim{R} = \dim{R}$.
\end{prop}

\begin{proof}
If $R$ is regular local then $\gldim{R} \le \dim{R}$. Conversely, if $\gldim{R}$ is finite then $\pd{R}{\kappa} < \infty$ so $R$ is reglar local. In this case, $\pd{R}{\kappa} = \dim{R}$ and $\gldim{R} \le \dim{R}$ so $\gldim{R} = \dim{R}$.
\end{proof}

\begin{lemma}
If $R$ is reglar local then $R_\p$ is regular local for each prime $\p \in \Spec{R}$.
\end{lemma}

\begin{proof}
If $R$ is regular local then $\gldim{R} < \infty$ and thus $\gldim{R_\p} \le \gldim{R} < \infty$. Since $R_\p$ is local and noetherian, $R_\p$ is regular local as well.
\end{proof}

\begin{defn}
A noetherian ring $R$ is \textit{regular} if $R_\p$ is regular local for each $\p \in \Spec{R}$.
\end{defn}

\begin{rmk}
The preceeding Lemma says that a regular local ring is regular. 
\end{rmk}

\begin{rmk}
It suffices to check regularity at $R_\m$ for maximal ideals $\m \in \mSpec{R}$ since $R_\p$ is a localization of some $R_\m$ and we have shown that localization preserves being regular local.
\end{rmk}

\begin{prop}
Let $R$ be a Noetherian ring. The following are equivalent for each $n \in \N$,
\begin{enumerate}
\item $\gldim{R} \le n$

\item for each $\m \in \mSpec{R}$ the ring $R_\m$ is regular and $\dim{R_\m} \le n$

\item for each $\p \in \mSpec{R}$ the ring $R_\p$ is regular and $\dim{R_\p} \le n$.
\end{enumerate}
Therefore, if $\gldim{R} < \infty$ then $R$ is regular and if $R$ is regular then
\[ \gldim{R} = \sup \{ \dim{R_\m} \mid \m \in \mSpec{R} \} = \sup \{ \dim{R_\p} \mid \p \in \Spec{R} \} \]
\end{prop}

\begin{proof}
This follows from,
\[ \gldim{R} = \sup \{ \gldim{R_\m} \mid \m \in \mSpec{R} \} \]
and the fact that $\gldim{R_\m} < \infty$ is equivalent to regularity of $R_\m$ in which case $\gldim{R_\m} = \dim{R_\m}$. 
\end{proof}

\begin{rmk}
Notice that even when $R$ is regular $\gldim{R}$ may be infinite simply because the dimensions of $R_\m$ for $\m \in \mSpec{R}$ may be unbounded even when $R$ is Noetherian. In this case, $\dim{R} = \infty$ so if $\dim{R}$ is finite then $\gldim{R}$ is finite iff $R$ is regular.
\end{rmk}

\section{Pseudomorphisms}

\begin{lemma}
Let $f : X \to Y$ be a morphism of schemes such that for each weakly associated point $y \in Y$ there exists a point $x \in X$ such that $f(x) = y$ and $\stalk{Y}{y} \to \stalk{X}{x}$ is injective. Then the map on sheaves $\struct{Y} \to f_* \struct{X}$ is injective.
\end{lemma}

\begin{proof}
To show that $\struct{Y} \to f_* \struct{X}$ is injective, it suffices to show that $\stalk{Y}{y} \to (f_* \struct{X})_y$ is injective on each weakly associated point $y \in Y$. Furthermore, we know there exists $x \in X$ with $f(x) = y$ and the composition $\stalk{Y}{y} \to (f_* \struct{X})_y \to \stalk{X}{x}$ is injective and thus $\stalk{Y}{y} \to (f_* \struct{X})_y$ is injective.
\end{proof}

\begin{rmk}
In particular, if $f : X \to Y$ is a dominant map of integral schemes then $\struct{Y} \to f_* \struct{X}$ is injective.
\end{rmk}

\begin{example}
Consider the map $\Spec{k[x]} \to \Spec{k[x,y]/(xy, y^2)}$. Although this map hits the generic point $(y)$, it does not hit the embedded associated point $(x, y^2)$ at the origin and thus $k[x,y]/(xy, y^2) \to k[x]$ is not injective since $y \mapsto 0$.
\end{example}

\begin{defn}
We say an immersion $\iota : Y \embed X$ is \textit{scheme theoretically dense} if the scheme theoretic image is $X$. 
\end{defn}

\begin{lemma}
An open immersion $\iota : U \to X$ is scheme theoretically dense iff $U$ contained all weakly associated points of $X$.
\end{lemma}

\begin{proof}

\end{proof}

When can we ensure that the coker of $\struct{Y} \to f_* \struct{X}$ is supported in codimension one.

\subsection{Annhiliators}

\begin{rmk}
Here we let $X$ be a scheme. Warning: many of these results do not hold for arbitrary locally ringed spaces. In particular, the kernel of quasi-coherent sheaves need not be quasi-coherent on an arbitrary locally ringed space. However, this holds locally on schemes because kernels and cokerns of sheaves associated to modules are associated to modules.
\end{rmk}

\begin{defn}
Let $\F$ be a sheaf of $\struct{X}$-modules. Then we define the sheaf of annihilators: 
\[ \shAnn{\struct{X}}{\F} = \ker{(\struct{X} \to \shHom{\struct{X}}{\F}{\F})} \]
\end{defn}

\begin{lemma}
Let $\F, \G$ be quasi-coherent $\struct{X}$-modules with $\F$ finitely presented. Then $\shHom{\struct{X}}{\F}{\G}$ is quasi-coherent.
\end{lemma}

\begin{proof}
Locally on $U \subset X$ we have a presentation,
\begin{center}
\begin{tikzcd}
\bigoplus_{i = 1}^m \struct{U} \arrow[r] & \bigoplus_{j = 1}^n \struct{U} \arrow[r] & \F|_U \arrow[r] & 0
\end{tikzcd}
\end{center}
Applying the functor $\shHom{\struct{U}}{-}{\G}$ gives,
\begin{center}
\begin{tikzcd}
0 \arrow[r] & \shHom{\struct{U}}{\F|_U}{\G|_U} \arrow[r] & \bigoplus_{j = 1}^n \G|_U \arrow[r] & \bigoplus_{i = 1}^m \G|_U
\end{tikzcd}
\end{center}
Since $\G$ is quasi-coherent and finite sums and kernels of quasi-coherent sheaves are quasi-coherent we see that $\shHom{\struct{X}}{\F}{\G}$ is locally quasi-coherent and thus quasi-coherent.
\end{proof}

\begin{lemma}
If $\F$ is finitely presented then $\shAnn{\struct{X}}{\F}$ is quasi-coherent.
\end{lemma}

\begin{proof}
From the previous lemma, $\shHom{\struct{X}}{\F}{\F}$ is quasi-coherent. Therefore, the kernel,
\[ \shAnn{\struct{X}}{\F} = \ker{(\struct{X} \to \shHom{\struct{X}}{\F}{\F})} \]
is quasi-coherent.
\end{proof}

\begin{prop}
Let $\F$ be finitely presented. Then $\Supp{\struct{X}}{\F}$ is closed and the quasi-coherent sheaf of ideals $\shAnn{\struct{X}}{\F}$ gives a scheme structure on $\Supp{\struct{X}}{\F}$. Furthermore, $\F$ is naturally a $\struct{X} / \shAnn{\struct{X}}{\F}$ - module.
\end{prop}

\begin{lemma}
Let $f : X \to Y$ be a morphism of schemes. Assume that $\struct{Y}$ and $f_* \struct{X}$ are coherent on $Y$. Furthermore, for each generic point of an irreducible component $\xi \in Y$ assume that there exists some $x \in X$ with $f(x) = \xi$ and $\stalk{Y}{\xi} \to \stalk{X}{x}$ surjective. Then $\Csh = \coker{(\struct{Y} \to f_* \struct{X})}$ has $Z = \Supp{\struct{Y}}{\Csh}$ in positive codimension.
\end{lemma}




\section{Singularities of Curves}


\begin{defn}
NORMALIZATION
\end{defn}

\begin{prop}
Normalization of a curve exists and is regular. 
\end{prop}

(CAN WE GET $H^0(O_X)$ is the same?)



\end{document}