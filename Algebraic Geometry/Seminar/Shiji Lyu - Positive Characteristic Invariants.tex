\documentclass[12pt]{article}
\usepackage{import}
\import{../}{AlgGeoCommands}

\begin{document}

Fix a prime $p$ and all rings will be $\FF_p$-algebras. Therefore, we have the natural transformation $F : R \to R$ so $R$ is an $R$-module in a nontrivial way which we denote as $F_* R$. 

\begin{theorem}[Kunz]
If $R$ is Noetherian, then $R$ is regular if and only if $F$ is flat (equivalently $F_* R$ is a flat $R$-module). 
\end{theorem}

\begin{rmk}
From now on, we only consider noetherian rings. 
\end{rmk}

\begin{rmk}
Even if $R$ is Noetherian $F$ can be nonfinite. For example $R = \FF_p(x_1, x_2, \dots)$ is not $F$-finite.
\end{rmk}

Given a local ring $(R, \m, k)$ we make some definitions.

\begin{defn}
$R$ is $F$-finite if $F_* R$ is a finite $R$-module. In this case the maps $F^e : R \to R$ are all finite. Tehn we write,
\[ \lambda_e(R) = \frac{\# \text{gens of } F^e_* R}{[k : k^{p^e}] p^{e \dim{R}}} \] 
and
\[ s_e(R) = \frac{\max \{ b \mid F_*^e R \cong R^{\oplus b} \oplus M \}}{[k : k^{p^e}] p^{e \dim{R}}} \]
It is clear that $\lambda_e(R) \ge 1$ and $s_E(R) \le 1$.
\end{defn}

\begin{prop}
If any $\lambda_e(R) = 1$ then all $\lambda_e(R) = 1$ and $s_e(R) = 1$ and $R$ is regular.
\end{prop}

\begin{defn}
$e_{HK}(R) = \lim_e \lambda_e(R) \ge 1$ and $s(R) = \lim_e s_e(R) \le 1$ called the $F$-signature.
\end{defn}

\begin{prop}
If $R$ is equidimensional, 
\[ R \text{ is regular } \iff e_{HK}(R) = 1 \iff s(R) = 1 \]
\end{prop}

\begin{prop}
$s(R) > 0$ iff $R$ is strongly $F$-regular.
\end{prop}

\begin{rmk}
The number of generators of $F^e_* R$ is equal to,
\begin{align*}
\dim_{k} (F^e_* R) \ot_R k & = \ell_{R}(F^e_* R / \m F^e_* R) = [k : k^{p^e}] \ell_{F^e_* R}(F^e_* R / \m F^e_* R)
\\
& = [k : k^{p^e}] \ell_R(R/\m^{[p]}) 
\end{align*}
\end{rmk}

\begin{prop}
This is extendable to non-$F$-finite $R$. For $R^{\wedge}$ reduced. There exists an $\m$-primary ideal $I$ and an element $u \in (I : \m)$ meaning $u \m \subset I$ such that,
\[ s_e(R) = \frac{\ell_R((I,u)^{[p^e]} / I^{[p^e]}}{p^{e \dim{R}}} \]
\end{prop}

\begin{prop}
For $e_1, e_2$ there exists $I, u$ that work for both.
\end{prop}

\begin{prop}
The limit exists for non-$F$-finite $R$.
\end{prop}

\begin{question}
Given $R$ is the function,
\[ \p \mapsto e_{HK}(R_\p} \quad \text{ or } \quad \p \mapsto s(R_\p) \]
semicontinuous on $\Spec{R}$?
\end{question}

\begin{rmk}
This is false if the regular locus is not open so we should at least require that the ring be $J_1$. Thus we will restrict to excellent rings $R$. 
\end{rmk}

\begin{theorem}[Smirnov, Rilstra]
True if $R$ is f.g. over an excellent local ring. 
\end{theorem}

\begin{rmk}
In general, this function is NOT constructible. It can take on infinitely many values because we have taken the limit. 
\end{rmk}

\begin{theorem}[Shepherd-Baron]
$\lambda_e$ and $s_e$ define semicontinuous functions.
\end{theorem}

\begin{theorem}[Polstra]
The convergence $\lambda_e \to e_{HK}$ and $s_e \to s$ are uniform.
\end{theorem}

\begin{theorem}['23]
For any excellent $R$, the convergence $\lambda \to e_{HK}$ and $s_E \to s$ are uniform. If $R$ is locally equidimensional then $e_{HK}$ defines a semicontinuous function. And $s$ defines a semicontinuous function if $R$ is either Gorenstein or a quotient of a regular ring. 
\end{theorem}


Let $A$ be a reduced complete equidimensional ring. Then there exists a regular local ring $P$ (power sieres) and a finite, generically \etale ring map $P \to A$ then,
\[ F^e_* P \ot_P A \to F^e_* A \]
is injective and ``birational'' (i.e. is isom in codim $0$). Weill use this for $R_\p^{\wedge}$ but only do the calculation with,
\[ P \hat{\ot}_K K^{\alg} \to R^{\wedge}_\p \hat{\ot}_K K^\alg \]
where $P$ is a power series ring.

\begin{prop}
Given an excellent ring $R$, there exists a family of C-G n with $P(\p) \to R_\p^{\wedge}$ with the multiplicity of the discriminant bounded\footnote{Actually, you need to take a finite flat, quasi-finite extension $S$ of $R$ and you only get $P(\p) \tp S_\p^{\wedge}$ on a subset of $\Spec{S}$ that covers $\Spec{R}$} and other numbers. 
\end{prop}

\end{document}